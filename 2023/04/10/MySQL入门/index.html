<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="环境：  MySQL 5.7.32； Ubuntu 2204；  教程：1、什么是数据库，为什么要学习数据库_哔哩哔哩_bilibili">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL入门">
<meta property="og:url" content="https://hdfzzf.github.io/2023/04/10/MySQL%E5%85%A5%E9%97%A8/index.html">
<meta property="og:site_name" content="HDFZZF&#39;s BLOG">
<meta property="og:description" content="环境：  MySQL 5.7.32； Ubuntu 2204；  教程：1、什么是数据库，为什么要学习数据库_哔哩哔哩_bilibili">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-04-09T16:00:00.000Z">
<meta property="article:modified_time" content="2023-04-10T02:04:39.096Z">
<meta property="article:author" content="hdfzzf">
<meta property="article:tag" content="入门">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/LOGO.jpg">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>MySQL入门</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
		<script type="text/x-mathjax-config">
		  MathJax.Hub.Config({
			tex2jax: {
			  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			  inlineMath: [['$','$']]
			}
		  });
		</script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
	
<meta name="generator" content="Hexo 6.0.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="القائمة"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="القائمة"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="الأعلى" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">首页</a></li><!--
     --><!--
       --><li><a href="/archives/">归档</a></li><!--
     --><!--
       --><li><a href="/tags/">标签</a></li><!--
     --><!--
       --><li><a href="/categories/">分类</a></li><!--
     --><!--
       --><li><a href="/search/">搜索</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" aria-label="下一篇" href="/2023/03/31/Docker%E5%85%A5%E9%97%A8/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="返回顶部" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
    </span>
    <br/>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.</span> <span class="toc-text">1. 初始数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1.1. 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.</span> <span class="toc-text">1.2. 分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">1.3.</span> <span class="toc-text">1.3. 安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.</span> <span class="toc-text">1.4. 连接数据库与简单使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-number">2.</span> <span class="toc-text">2. 数据库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%86%E8%A7%A3"><span class="toc-number">2.1.</span> <span class="toc-text">2.1. 操作数据库（了解）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%AD%97%E6%AE%B5%E7%9A%84%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.</span> <span class="toc-text">2.2. 数据类型（字段的常用类型）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%80%BC"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.2.1. 数值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.2.2. 字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%92%8C%E6%97%A5%E6%9C%9F"><span class="toc-number">2.2.3.</span> <span class="toc-text">2.2.3. 时间和日期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">2.2.4.</span> <span class="toc-text">2.2.4. Null</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E5%B1%9E%E6%80%A7"><span class="toc-number">2.3.</span> <span class="toc-text">2.3. 字段属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E5%AD%97%E6%AE%B5%E9%9D%9E%E5%BF%85%E9%A1%BB%E4%BA%BA%E4%B8%BA%E8%A7%84%E5%AE%9A"><span class="toc-number">2.4.</span> <span class="toc-text">2.4. 特殊字段（非必须，人为规定）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-number">2.5.</span> <span class="toc-text">2.5. 创建表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%95%E6%93%8E"><span class="toc-number">2.6.</span> <span class="toc-text">2.6. 表的类型（数据库引擎）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%92%8C%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-number">2.7.</span> <span class="toc-text">2.7. 修改和删除表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9"><span class="toc-number">2.7.1.</span> <span class="toc-text">2.7.1. 修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4"><span class="toc-number">2.7.2.</span> <span class="toc-text">2.7.2. 删除</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">3. 数据管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E9%94%AE"><span class="toc-number">3.1.</span> <span class="toc-text">3.1. 外键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dml-%E8%AF%AD%E8%A8%80"><span class="toc-number">3.2.</span> <span class="toc-text">3.2. DML 语言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1. 添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-1"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2. 修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4-1"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.2.3. 删除</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#delete-%E5%88%A0%E9%99%A4%E9%97%AE%E9%A2%98"><span class="toc-number">3.2.3.1.</span> <span class="toc-text">3.2.3.1. DELETE 删除问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dql-%E8%AF%AD%E8%A8%80"><span class="toc-number">3.3.</span> <span class="toc-text">3.3. DQL 语言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.3.1. 环境配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%AD%97%E6%AE%B5"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.3.2. 查询字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.3.3.</span> <span class="toc-text">3.3.3. 查询表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#where-%E6%9D%A1%E4%BB%B6%E5%AD%90%E5%8F%A5"><span class="toc-number">3.3.4.</span> <span class="toc-text">3.3.4. WHERE 条件子句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%94%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.4.</span> <span class="toc-text">3.4. 联表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E5%86%85%E5%AE%B9"><span class="toc-number">3.4.1.</span> <span class="toc-text">3.4.1. 主要内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%86%85%E5%AE%B9"><span class="toc-number">3.4.2.</span> <span class="toc-text">3.4.2. 其他内容</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#where-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">3.4.2.1.</span> <span class="toc-text">3.4.2.1. Where 的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.4.2.2.</span> <span class="toc-text">3.4.2.2. 注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%9D%E8%80%83%E9%A2%98"><span class="toc-number">3.4.2.3.</span> <span class="toc-text">3.4.2.3. 思考题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">3.4.3.</span> <span class="toc-text">3.4.3. 自连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E5%92%8C%E6%8E%92%E5%BA%8F"><span class="toc-number">3.5.</span> <span class="toc-text">3.5. 分页和排序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">3.5.1.</span> <span class="toc-text">3.5.1. 排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5"><span class="toc-number">3.5.2.</span> <span class="toc-text">3.5.2. 分页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%9D%E8%80%83%E9%A2%98-1"><span class="toc-number">3.5.3.</span> <span class="toc-text">3.5.3. 思考题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%B5%8C%E5%A5%97%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.6.</span> <span class="toc-text">3.6. 子查询和嵌套查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-number">3.6.1.</span> <span class="toc-text">3.6.1. 注意</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%92%8C%E8%BF%87%E6%BB%A4"><span class="toc-number">3.7.</span> <span class="toc-text">3.7. 分组和过滤</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">4.</span> <span class="toc-text">4. 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#count-%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98"><span class="toc-number">4.1.</span> <span class="toc-text">4.1. Count 相关问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BA%A7%E5%88%AB%E7%9A%84-md5-%E5%8A%A0%E5%AF%86"><span class="toc-number">4.2.</span> <span class="toc-text">4.2. 数据库级别的 MD5
加密</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">5.</span> <span class="toc-text">5. 事务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="toc-number">5.1.</span> <span class="toc-text">5.1. 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E4%BA%8B%E5%8A%A1"><span class="toc-number">5.2.</span> <span class="toc-text">5.2. 执行事务</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">6.</span> <span class="toc-text">6. 索引</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">6.1.</span> <span class="toc-text">6.1. 索引的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%9A%E9%9B%86%E7%B4%A2%E5%BC%95%E4%B8%8E%E4%BA%8C%E7%BA%A7%E7%B4%A2%E5%BC%95"><span class="toc-number">6.2.</span> <span class="toc-text">6.2. 聚集索引与二级索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BE%E4%B8%87%E6%95%B0%E6%8D%AE%E6%B5%8B%E8%AF%95"><span class="toc-number">6.3.</span> <span class="toc-text">6.3. 百万数据测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E5%8E%9F%E5%88%99"><span class="toc-number">6.4.</span> <span class="toc-text">6.4. 索引原则</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E5%92%8C%E5%A4%87%E4%BB%BD"><span class="toc-number">7.</span> <span class="toc-text">7. 权限管理和备份</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">7.1.</span> <span class="toc-text">7.1. 用户管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql-%E5%A4%87%E4%BB%BD"><span class="toc-number">7.2.</span> <span class="toc-text">7.2. MySQL 备份</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%84%E8%8C%83%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">8.</span> <span class="toc-text">8. 规范数据库设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-2"><span class="toc-number">8.1.</span> <span class="toc-text">8.1. 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">8.2.</span> <span class="toc-text">8.2. 三大范式（关系型数据库）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8C%83%E5%BC%8F%E5%AE%9A%E4%B9%89"><span class="toc-number">8.2.1.</span> <span class="toc-text">8.2.1. 范式定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BE%9D%E8%B5%96"><span class="toc-number">8.2.2.</span> <span class="toc-text">8.2.2. 函数依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F%E5%8C%BA%E5%88%AB"><span class="toc-number">8.2.3.</span> <span class="toc-text">8.2.3. 三大范式区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%84%E8%8C%83%E6%80%A7%E5%92%8C%E6%80%A7%E8%83%BD%E5%8F%96%E8%88%8D"><span class="toc-number">8.2.4.</span> <span class="toc-text">8.2.4. 规范性和性能取舍</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#jdbc"><span class="toc-number">9.</span> <span class="toc-text">9. JDBC</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        MySQL入门
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">hdfzzf</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-04-09T16:00:00.000Z" itemprop="datePublished">2023-04-10</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Linux/">Linux</a> › <a class="category-link" href="/categories/MySQL/">MySQL</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/Linux/" rel="tag">Linux</a>, <a class="tag-link-link" href="/tags/MySQL/" rel="tag">MySQL</a>, <a class="tag-link-link" href="/tags/%E5%85%A5%E9%97%A8/" rel="tag">入门</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>环境：</p>
<ul>
<li>MySQL 5.7.32；</li>
<li>Ubuntu 2204；</li>
</ul>
<p>教程：<a
target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1NJ411J79W?p=1&amp;vd_source=c3b0b6208defe5707a75f328be65ce16">1、什么是数据库，为什么要学习数据库_哔哩哔哩_bilibili</a></p>
<span id="more"></span>
<h1 id="初始数据库">1. 初始数据库</h1>
<h2 id="概述">1.1. 概述</h2>
<p>数据库的概念：</p>
<ul>
<li>数据库：database，保存 <strong>有组织的数据</strong>
的容器，注意是有组织的，这意味着数据库中的数据有着一定的结构；</li>
</ul>
<p>简单理解就是一个仓库，里面存放着许多数据，这些数据根据功能、拥有者或者其他进行分类，同一类别的数据存储在一起。</p>
<p>需要注意的是 <strong>数据库</strong> 和 <strong>数据库软件</strong>
是两个东西，现实中，人们经常使用数据库来代表数据库软件，数据库软件确切的说是
DBMS（数据库管理系统，database management system），数据库时通过 DBMS
创建和使用的容器。用户使用的是 DBMS，而不直接访问数据库，由 DBMS
代替用户访问数据库。</p>
<hr />
<ul>
<li>表：某种 <strong>特定类型数据</strong> 的 <strong>结构化</strong>
清单；</li>
</ul>
<p>假设要记录一个班级学生的信息，那么大概会是这样的：</p>
<table>
<thead>
<tr class="header">
<th>学号</th>
<th>姓名</th>
<th>性别</th>
<th>住址</th>
<th>...</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>小明</td>
<td>男</td>
<td>xxx</td>
<td>...</td>
</tr>
<tr class="even">
<td>2</td>
<td>Alice</td>
<td>女</td>
<td>xxx</td>
<td>...</td>
</tr>
<tr class="odd">
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
</tbody>
</table>
<p>这就是一张表，这个表内的数据都有着一定的联系（同一班级），都有着相同的信息（学号、姓名、性别、住址等）这些相同信息就是
<strong>结构</strong>。</p>
<p>数据库中每一个表都有一个名字，用来标识自己。此名字唯一，这表示当前数据库中没有其他表具有相同的名字。表名唯一的一个因素：用户查看某个表一般通过
<code>db_name.table_name</code>
来访问，这就意味着同一个数据库中不能存在两个表名相同的表；</p>
<p>表具有一些特性，这些特性定义了数据在表中如何存储，可以存储什么样的数据，数据如何分解，各部分信息如何命名等。描述这表的这组信息就是所谓的模式，模式可以用来描述数据库中特定的表以及整个数据库。</p>
<hr />
<ul>
<li>模式：schema，关于数据库和表的布局及特性的信息；</li>
</ul>
<p>在使用中，经常把模式当做数据库的同义词，比如
<code>informatino_schema</code> 里面存储所有数据库的表示
<code>schemata</code>。</p>
<hr />
<ul>
<li>列：表中的一个字段，所有表都是由一个或多个列组成；</li>
</ul>
<p>就是上述班级表格中的列。正确地将数据分解为多个列极为重要。例如，城市、州、邮政编码应该总是独立的列。通过把它分解开，才有可能利用特定的列对数据进行排序和过滤，如找特定性别的学生，或者叫某个名字的学生。</p>
<ul>
<li>数据类型：所容许的数据的类型。每个表列都有相应的数据类型，它限制（或容许）该列中存储的数据。</li>
</ul>
<p>数据库中每个列都有相应的数据类型。数据类型定义列可以存储的数据种类。例如，如果列中存储的为数字（或许是订单中的物品数），则相应的数据类型应该为数值类型。如果列中存储的是日期、文本、注释、金额等，则应该用恰当的数据类型规定出来。</p>
<p>数据类型限制可存储在列中的数据种类（例如，防止在数值字段中录入字符值）。数据类型还帮助正确地排序数据，并在优化磁盘使用方面起重要的作用。因此，在创建表时必须对数据类型给予特别的关注。</p>
<hr />
<ul>
<li>行：表中的一个记录；记录和行经常混用，但行才是正确的；</li>
</ul>
<p>表中的数据是按行存储的，所保存的每个记录存储在自己的行内。如果将表想象为网格，网格中垂直的列为表列，水平行为表行。</p>
<hr />
<ul>
<li>主键：一列（或一组列），其值能够唯一区分表中每个行。</li>
</ul>
<p>唯一标识表中每行的这个列（或这组列）称为主键。主键用来表示一个特定的行。没有主键，更新或删除表中特定行很困难，因为没有安全的方法保证只涉及相关的行。</p>
<p>应该总是定义主键，虽然并不总是都需要主键，但大多数数据库设计人员都应保证他们创建的每个表具有一个主键，以便于以后的数据操纵和管理</p>
<p>表中的任何列都可以作为主键，只要它满足以下条件：</p>
<ul>
<li>任意两行都不具有相同的主键值；</li>
<li>每个行都必须具有一个主键值（主键列不允许 NULL 值）。</li>
</ul>
<p>主键通常定义在表的一列上，但这并不是必需的，也可以一起使用多个列作为主键。在使用多列作为主键时，上述条件必须应用到构成主键的所有列，所有列值的组合必须是唯一的（但单个列的值可以不唯一）。</p>
<p>主键的好习惯：</p>
<ul>
<li>不更新主键列中的值；</li>
<li>不重用主键列的值；</li>
<li>不在主键列中使用可能会更改的值；</li>
</ul>
<p>SQL，structured Query Language
的缩写，专门用来与数据库通信的语言，也是用户用来操作 DBMS
的语言，当然也可以使用图形化界面。SQL 的优点：</p>
<ol type="1">
<li>SQL 不是某个特定数据库软件的专用语言，而是几乎所有 DBMS 都支持
SQL；</li>
<li>简单易学，都是一些描述性很强的英语单词；</li>
</ol>
<p>虽然 SQL 不是某个特定数据软件的专用语言，但每个 DBMS 的 SQL
都有一些不同。</p>
<h2 id="分类">1.2. 分类</h2>
<p>数据库主要分为两种类型：</p>
<ul>
<li>关系型数据库（SQL）；
<ul>
<li>MySQL、Oracle、Sql Server、SQLlite...</li>
<li>通过表和表之间、行和列之间的关系进行数据的存储；</li>
</ul></li>
<li>非关系型数据库（NoSQL，Not Only SQL）；
<ul>
<li>Redis、MongDB...</li>
<li>非关系型数据库，对象存储，通过对象的自身的属性来决定；</li>
</ul></li>
</ul>
<blockquote>
<p>可以看： [[2. 认识数据库]]</p>
</blockquote>
<h2 id="安装">1.3. 安装</h2>
<p>看 [[1. web运行基础环境搭建]]</p>
<h2 id="连接数据库与简单使用">1.4. 连接数据库与简单使用</h2>
<p>命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uNAME -p[password]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果不指定端口，默认是 3306，指定端口参数 <code>-Pport</code>；</p>
</blockquote>
<ul>
<li>查看所有数据库：<code>show databases;</code></li>
<li>切换（使用）某个数据库：<code>use databaseName;</code></li>
<li>查看某个数据库下所有的表：<code>show tables;</code></li>
<li>查看某个表下所有的字段信息：<code>describe tableName;</code> 或者
<code>desc tableName;</code></li>
<li>查看某个数据库创建的语句：<code>show CREATE DATABASE databaseName;</code></li>
<li>查看某个表创建的语句：<code>show CREATE TABLE tableName;</code></li>
</ul>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408143112.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ul>
<li>单行注释：<code>--</code> 和 <code>#</code>；</li>
<li>多行注释 <code>/**/</code>；</li>
</ul>
<h1 id="数据库操作">2. 数据库操作</h1>
<blockquote>
<p>操作数据库 -&gt; 操作数据库中的表 -&gt;
操作数据库中的表中的字段。</p>
</blockquote>
<blockquote>
<p>MySQL 关键字不区分大小写。</p>
</blockquote>
<h2 id="操作数据库了解">2.1. 操作数据库（了解）</h2>
<p>大致有 3 类：</p>
<ol type="1">
<li>新建数据库；</li>
<li>使用数据库；</li>
<li>删除数据库；</li>
</ol>
<p>新建数据库命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE [IF NOT EXISTS] databaseName;</span><br></pre></td></tr></table></figure>
<ul>
<li>数据库名不能重复，中括号中间的意思就是如果不存在则创建；</li>
</ul>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408144044.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>删除数据库：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP DATABASE [IF EXISTS] databaseName;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408144155.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>使用数据库：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE databaseName;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408144145.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>如果数据库的名字是关键字
(包括以后的表名、字段名)，可以使用反引号来包括（不仅是删除，所有的 mysql
语句都一样）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE `Name`;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408144044.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h2 id="数据类型字段的常用类型">2.2. 数据类型（字段的常用类型）</h2>
<h3 id="数值">2.2.1. 数值</h3>
<p>整数：</p>
<table>
<thead>
<tr class="header">
<th>类型</th>
<th>占用字节</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tinyint</td>
<td>1</td>
</tr>
<tr class="even">
<td>smallint</td>
<td>2</td>
</tr>
<tr class="odd">
<td>mediumint</td>
<td>3</td>
</tr>
<tr class="even">
<td>int</td>
<td>4</td>
</tr>
<tr class="odd">
<td>bigint</td>
<td>8</td>
</tr>
</tbody>
</table>
<p>浮点数：</p>
<table>
<thead>
<tr class="header">
<th>类型</th>
<th>占用字节</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>float</td>
<td>4</td>
</tr>
<tr class="even">
<td>double</td>
<td>8</td>
</tr>
<tr class="odd">
<td>decimal</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li><code>decimal</code>：字符串形式的浮点数，因为 <code>double</code>
或者 <code>float</code> 有精度问题，所以在金融领域，使用的是
<code>decimal</code>；</li>
</ul>
<h3 id="字符串">2.2.2. 字符串</h3>
<table>
<thead>
<tr class="header">
<th>类型</th>
<th>占用字节</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>char</td>
<td>0~255</td>
</tr>
<tr class="even">
<td>varchar (常用)</td>
<td>0~65535</td>
</tr>
<tr class="odd">
<td>tinytext</td>
<td><span class="math inline">\(2^8-1\)</span></td>
</tr>
<tr class="even">
<td>text</td>
<td><span class="math inline">\(2^{16}-1\)</span></td>
</tr>
</tbody>
</table>
<h3 id="时间和日期">2.2.3. 时间和日期</h3>
<table>
<thead>
<tr class="header">
<th>类型</th>
<th>格式</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data</td>
<td>YYYY-MM-DD</td>
</tr>
<tr class="even">
<td>time</td>
<td>HH:MM:SS</td>
</tr>
<tr class="odd">
<td>datatime</td>
<td>YYYY-MM-DD HH:MM:SS</td>
</tr>
<tr class="even">
<td>timestamp</td>
<td>1970.1.1 到现在的毫秒数</td>
</tr>
<tr class="odd">
<td>year</td>
<td>年份</td>
</tr>
</tbody>
</table>
<h3 id="null">2.2.4. Null</h3>
<p>没有值，未知，不要使用 null 来进行运算，结果还是 null。</p>
<h2 id="字段属性">2.3. 字段属性</h2>
<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 91%" />
</colgroup>
<thead>
<tr class="header">
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>unsigned</td>
<td>无符号的整数，该列不能为负数</td>
</tr>
<tr class="even">
<td>zerofill</td>
<td>不足的位数，使用 0 来填充，比如 <code>int(3)</code> 的列的值为
5，那么最终结果是 <code>005</code></td>
</tr>
<tr class="odd">
<td>自增 (auto_increment)</td>
<td>自动在上一条的基础上加
1，通常用来设计唯一的主键，必须是整数，可以设置起始值和步长</td>
</tr>
<tr class="even">
<td>非空</td>
<td>设置为非空的列，如果不赋值就会报错</td>
</tr>
<tr class="odd">
<td>default</td>
<td>设置默认的值，如果不指定该列的值，则使用默认值</td>
</tr>
</tbody>
</table>
<blockquote>
<p><code>int(m)</code> 括号中的值和其字节大小无关，比如
<code>int(10)</code>，不是意味着 10 字节，而是意味着会显示 10
位的内容，比如值是 32，并且是 zerofill，则显示出来的内容是
<code>0000000032</code>。</p>
</blockquote>
<h2 id="特殊字段非必须人为规定">2.4. 特殊字段（非必须，人为规定）</h2>
<p>每个表都必须存在以下 5 个字段：</p>
<ol type="1">
<li><code>id</code>：主键；</li>
<li><code>version</code>：乐观锁；</li>
<li><code>is_delete</code>：伪删除，删除记录并不是真正的删除，而是把该列值置
1；</li>
<li><code>gmt_create</code>：创建时间；</li>
<li><code>gmt_update</code>：修改时间；</li>
</ol>
<p>这是企业项目才会有要求，并且每个企业的要求也有所不同。</p>
<h2 id="创建表">2.5. 创建表</h2>
<p>建表命令例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS `student` (</span><br><span class="line">`id` INT(4) NOT NULL AUTO_INCREMENT COMMENT &#x27;学号&#x27;,</span><br><span class="line">`name` VARCHAR(30) NOT NULL DEFAULT &#x27;匿名&#x27; COMMENT &#x27;姓名&#x27;,</span><br><span class="line">`pwd` VARCHAR(20) NOT NULL DEFAULT &#x27;123456&#x27; COMMENT &#x27;密码&#x27;,</span><br><span class="line">`birthday` DATE DEFAULT NULL COMMENT &#x27;生日&#x27;,</span><br><span class="line">`address` VARCHAR(50) DEFAULT NULL COMMENT &#x27;地址&#x27;,</span><br><span class="line">PRIMARY KEY(`id`)</span><br><span class="line">)ENGINE=INNODB DEFAULT CHARSET=utf8mb4;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408152439.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE [IF NOT EXISTS] `表名`(</span><br><span class="line">&#x27;字段名&#x27; 列类型 [属性 属性 ...] [索引] [注释],</span><br><span class="line">&#x27;字段名&#x27; 列类型 [属性 属性 ...] [索引] [注释],</span><br><span class="line">&#x27;字段名&#x27; 列类型 [属性 属性 ...] [索引] [注释],</span><br><span class="line">&#x27;字段名&#x27; 列类型 [属性 属性 ...] [索引] [注释],</span><br><span class="line">&#x27;字段名&#x27; 列类型 [属性 属性 ...] [索引] [注释],</span><br><span class="line">...,</span><br><span class="line">PRIMARY KEY(`字段名`)</span><br><span class="line">)[引擎][字符集][注释];</span><br></pre></td></tr></table></figure>
<h2 id="表的类型数据库引擎">2.6. 表的类型（数据库引擎）</h2>
<p>数据库引擎可以使用命令 <code>show engines</code> 查看：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408153035.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>其中最主要的是：InnoDB（默认） 和 MyISAM（早些年使用）。</p>
<table>
<thead>
<tr class="header">
<th>功能</th>
<th>MyISAM</th>
<th>InNoDB</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>事务支持</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr class="even">
<td>数据行锁定</td>
<td>不支持（表锁定）</td>
<td>支持</td>
</tr>
<tr class="odd">
<td>外键约束</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr class="even">
<td>全文索引</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr class="odd">
<td>表空间大小</td>
<td>较小</td>
<td>较大，约为 2 倍</td>
</tr>
</tbody>
</table>
<p>常规使用：</p>
<ul>
<li><code>MyISAM</code>：节约空间，速度较快；</li>
<li><code>InnoDB</code>：安全性高，事物的处理，多表多用户操作；</li>
</ul>
<h2 id="修改和删除表">2.7. 修改和删除表</h2>
<h3 id="修改">2.7.1. 修改</h3>
<blockquote>
<p>一下操作使用的是上一小节创建的 <code>student</code> 表；</p>
</blockquote>
<p>修改表名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE old_tableName RENAME AS new_tableName;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408154843.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>增加字段：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE tableName ADD 字段名 类型 [属性 ...];</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408155002.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>修改表的字段：</p>
<ul>
<li>重命名，使用
<code>change</code>，可以进行字段重命名，新版也可以修改约束；</li>
<li>修改约束，使用 <code>modify</code>，只能够修改约束；</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. ALTER TABLE tableName MODIFY 字段名 类型 [属性...]; # 修改约束</span><br><span class="line">2. ALTER TABLE tableName CHANGE 旧字段名 新字段名 类型 [属性...]; # 字段重命名</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408155046.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408155118.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>删除表的字段：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE tableName DROP 字段名;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408155144.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h3 id="删除">2.7.2. 删除</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE [IF EXISTS] tableName;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408155219.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>如果表不存在，加了 <code>if exists</code>
只会警告，而不加的会报错。</p>
<h1 id="数据管理">3. 数据管理</h1>
<h2 id="外键">3.1. 外键</h2>
<p>理解：比如一张学生的表，还有一张年级信息的表，那么学生和年级信息都有一个关联那就是学生的年级，那么就可以让学生这张表的年级字段引用年级信息表的相关字段，这样，两张表就通过一个字段关联在一起。</p>
<p>添加外键时，外键必须已经存在。为了演示，先创建一个 <code>grade</code>
表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table `grade`(</span><br><span class="line">`gradeid` int NOT NULL,</span><br><span class="line">`other` varchar(30),</span><br><span class="line">PRIMARY KEY(`gradeid`)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>方式 1：创建表的同时增加约束（复杂）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS `student` (</span><br><span class="line">`id` INT(4) NOT NULL AUTO_INCREMENT COMMENT &#x27;学号&#x27;,</span><br><span class="line">`name` VARCHAR(30) NOT NULL DEFAULT &#x27;匿名&#x27; COMMENT &#x27;姓名&#x27;,</span><br><span class="line">`pwd` VARCHAR(20) NOT NULL DEFAULT &#x27;123456&#x27; COMMENT &#x27;密码&#x27;,</span><br><span class="line">`birthday` DATE DEFAULT NULL COMMENT &#x27;生日&#x27;,</span><br><span class="line">`address` VARCHAR(50) DEFAULT NULL COMMENT &#x27;地址&#x27;,</span><br><span class="line">`gradeid` INT NOT NULL COMMENT &#x27;年级&#x27;,</span><br><span class="line">PRIMARY KEY(`id`),</span><br><span class="line">CONSTRAINT `FK_gradeid` FOREIGN KEY(`gradeid`) REFERENCES `grade`(`gradeid`)</span><br><span class="line">)ENGINE=INNODB DEFAULT CHARSET=utf8mb4;</span><br></pre></td></tr></table></figure>
<p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CONSTRAINT `外键名` FOREIGN KEY(`字段名`) REFERENCES `表名`(`字段名`)</span><br></pre></td></tr></table></figure>
<p>解释：当前表的某个字段引用其他表的某个字段，并为当前表的该字段取一个别名，一般都是
<code>FK_原字段名</code>。</p>
<p>当 <code>student</code> 引用了 <code>grade</code>
之后，就不能直接删除 <code>grade</code> 了，必须先删除
<code>student</code>。</p>
<p>删除外键：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 DROP FOREIGN KEY 外建名；</span><br></pre></td></tr></table></figure>
<p>方式 2：表创建成功后，添加外键</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE `表名` ADD CONSTRAINT `外键名` FOREIGN KEY(&#x27;字段名&#x27;) REFERENCES `表名`(`字段名`)</span><br></pre></td></tr></table></figure>
<p>以上操作都是物理外键，数据库级别的外键，不建议使用，避免数据库过多造成困扰。最佳实践：</p>
<ol type="1">
<li>数据库就是单纯的放表，只用来存数据；</li>
<li>如果要使用多张表的数据，或者使用外键，利用程序去实现；</li>
</ol>
<h2 id="dml-语言">3.2. DML 语言</h2>
<p>DML，数据操作语言，Data Manipulation Language。</p>
<p>数据库意义：数据存储、数据管理。</p>
<p>DML 语言：</p>
<ol type="1">
<li><code>insert</code></li>
<li><code>update</code></li>
<li><code>delete</code></li>
</ol>
<h3 id="添加">3.2.1. 添加</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO `表名`(字段1, 字段2, 字段3, ...) </span><br><span class="line">VALUES(值1, 值2, 值 3, ...), (值1, 值2, 值 3, ...), ...;</span><br></pre></td></tr></table></figure>
<ul>
<li>如果主键自增，可以不插入主键的值；</li>
<li>如果不写表的字段，会将 <code>VALUES</code>
中的值与所有字段一一匹配（不建议使用）；</li>
</ul>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408164208.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>可以同时插入多条记录：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408164452.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>不指明表的字段，必须把所有值都写进去，包括主键：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408164717.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h3 id="修改-1">3.2.2. 修改</h3>
<p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE `表名` SET `字段1`=新值[, `字段2`=新值, `字段3`=新值, ...] WHERE 条件;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408164948.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>注意：</p>
<ol type="1">
<li>条件可以不写，但不写条件就会把整个表的对应字段的值都做修改。</li>
<li>值可以是一个变量，比如 <code>current_time</code>；</li>
</ol>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408165148.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408165948.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>WHERE 条件子句使用的操作符：</p>
<table>
<thead>
<tr class="header">
<th>操作符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>=</td>
<td>等于</td>
</tr>
<tr class="even">
<td>&lt;&gt;</td>
<td>不等于</td>
</tr>
<tr class="odd">
<td>!=</td>
<td>不等于</td>
</tr>
<tr class="even">
<td>&gt;</td>
<td>大于</td>
</tr>
<tr class="odd">
<td>&lt;</td>
<td>小于</td>
</tr>
<tr class="even">
<td>&gt;=</td>
<td>大于等于</td>
</tr>
<tr class="odd">
<td>&lt;=</td>
<td>小于等于</td>
</tr>
<tr class="even">
<td>BETWEEN a AND b</td>
<td>闭合区间：<code>[a, b]</code></td>
</tr>
<tr class="odd">
<td>条件_1 AND 条件_2</td>
<td>与</td>
</tr>
<tr class="even">
<td>条件_1 OR 条件_2</td>
<td>或</td>
</tr>
</tbody>
</table>
<h3 id="删除-1">3.2.3. 删除</h3>
<p>删除语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM `表名` WHERE 条件;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408170256.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>注意：</p>
<ol type="1">
<li>条件最好写，否则就会把整个表的内容删除；</li>
</ol>
<p>清空语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TRUNCATE `表名`;</span><br></pre></td></tr></table></figure>
<p><code>TRUNCATE</code> 和 <code>DELETE</code> 的相同、不同点：</p>
<ol type="1">
<li>相同点：都能删除数据，且都不删除表结构；</li>
<li>不同点：
<ol type="1">
<li><code>DELETE</code> 不会影响自增；</li>
<li><code>TRUNCATE</code> 会重置自增；</li>
<li><code>TRUNCATE</code> 不影响事务；</li>
</ol></li>
</ol>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408171036.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>从上图可以知道，使用 <code>DELETE</code>
清空之后，自增没有受到影，而使用 <code>TRUNCATE</code>
清空，自增重置。</p>
<h4 id="delete-删除问题">3.2.3.1. <code>DELETE</code> 删除问题</h4>
<p>使用 <code>DELTE</code> 删除之后，<strong>重启数据库</strong>：</p>
<ul>
<li>InnoDB
自增重置，因为自增是一个计数器，存在内存中，进程结束，内存也就释放；</li>
<li>MyISAM 自增不受影响，存在文件中，不会丢失；</li>
</ul>
<p>重启前（第一张图是 Innodb，第二张图是 MyISAM）：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408171257.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408171435.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>重启后（第一张图是 Innodb，第二张图是 MyISAM）：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408171546.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408171607.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<blockquote>
<p>好像 mysql 8.0 把这个修复了，<code>DELETE</code> 也不会重置自增；</p>
</blockquote>
<h2 id="dql-语言">3.3. DQL 语言</h2>
<p>DQL，数据查询语言，Data Query Language。特点：</p>
<ul>
<li>所有查询操作都需要使用它 <code>select</code>；</li>
<li>数据库中最核心、使用频率最高的语句；</li>
</ul>
<p><code>SELECT</code> 完整语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT [ALL | DISTINCT]</span><br><span class="line">&#123;* | table.* | [table.field1[AS alias1][,table.field2[AS alias2]][...]]&#125;</span><br><span class="line">FROM table_name [AS table_alias]</span><br><span class="line">[LEFT | RIGHT | INNER JOIN table_name2]</span><br><span class="line">[WHERE ...]</span><br><span class="line">[GROUP BY ...]</span><br><span class="line">[HAVING]</span><br><span class="line">[ORDER BY ...]</span><br><span class="line">[LIMIT &#123;[offset, ]row_count | row_countOFFSET offset&#125;];</span><br></pre></td></tr></table></figure>
<h3 id="环境配置">3.3.1. 环境配置</h3>
<p>执行下面语句：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -proot school &lt; school.sql</span><br></pre></td></tr></table></figure>
<p>将下面文件导入到数据库中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">create database if not exists `school`;  </span><br><span class="line"></span><br><span class="line">-- 创建一个school数据库  </span><br><span class="line">use `school`;</span><br><span class="line"></span><br><span class="line">-- 创建学生表  </span><br><span class="line">drop table if exists `student`;  </span><br><span class="line">create table `student`(  </span><br><span class="line">`studentno` int(4) not null comment &#x27;学号&#x27;,  </span><br><span class="line">`loginpwd` varchar(20) default null,  </span><br><span class="line">`studentname` varchar(20) default null comment &#x27;学生姓名&#x27;,  </span><br><span class="line">`sex` tinyint(1) default null comment &#x27;性别，0或1&#x27;,  </span><br><span class="line">`gradeid` int(11) default null comment &#x27;年级编号&#x27;,  </span><br><span class="line">`phone` varchar(50) not null comment &#x27;联系电话，允许为空&#x27;,  </span><br><span class="line">`address` varchar(255) not null comment &#x27;地址，允许为空&#x27;,  </span><br><span class="line">`borndate` datetime default null comment &#x27;出生时间&#x27;,  </span><br><span class="line">`email` varchar (50) not null comment &#x27;邮箱账号允许为空&#x27;,  </span><br><span class="line">`identitycard` varchar(18) default null comment &#x27;身份证号&#x27;,  </span><br><span class="line">primary key (`studentno`),  </span><br><span class="line">unique key `identitycard`(`identitycard`),  </span><br><span class="line">key `email` (`email`)  </span><br><span class="line">)engine=myisam default charset=utf8;</span><br><span class="line"></span><br><span class="line">-- 创建年级表  </span><br><span class="line">drop table if exists `grade`;  </span><br><span class="line">create table `grade`(  </span><br><span class="line">`gradeid` int(11) not null auto_increment comment &#x27;年级编号&#x27;,  </span><br><span class="line">`gradename` varchar(50) not null comment &#x27;年级名称&#x27;,  </span><br><span class="line">primary key (`gradeid`)  </span><br><span class="line">) engine=innodb auto_increment = 6 default charset = utf8;  </span><br><span class="line">  </span><br><span class="line">-- 创建科目表  </span><br><span class="line">drop table if exists `subject`;  </span><br><span class="line">create table `subject`(  </span><br><span class="line">`subjectno`int(11) not null auto_increment comment &#x27;课程编号&#x27;,  </span><br><span class="line">`subjectname` varchar(50) default null comment &#x27;课程名称&#x27;,  </span><br><span class="line">`classhour` int(4) default null comment &#x27;学时&#x27;,  </span><br><span class="line">`gradeid` int(4) default null comment &#x27;年级编号&#x27;,  </span><br><span class="line">primary key (`subjectno`)  </span><br><span class="line">)engine = innodb auto_increment = 19 default charset = utf8;  </span><br><span class="line">  </span><br><span class="line">-- 创建成绩表  </span><br><span class="line">drop table if exists `result`;  </span><br><span class="line">create table `result`(  </span><br><span class="line">`studentno` int(4) not null comment &#x27;学号&#x27;,  </span><br><span class="line">`subjectno` int(4) not null comment &#x27;课程编号&#x27;,  </span><br><span class="line">`examdate` datetime not null comment &#x27;考试日期&#x27;,  </span><br><span class="line">`studentresult` int (4) not null comment &#x27;考试成绩&#x27;,  </span><br><span class="line">key `subjectno` (`subjectno`)  </span><br><span class="line">)engine = innodb default charset = utf8;</span><br><span class="line"></span><br><span class="line">-- 插入学生数据 其余自行添加 这里只添加了2行  </span><br><span class="line">insert into `student` (`studentno`,`loginpwd`,`studentname`,`sex`,`gradeid`,`phone`,`address`,`borndate`,`email`,`identitycard`)  </span><br><span class="line">values  </span><br><span class="line">(1000,&#x27;123456&#x27;,&#x27;张伟&#x27;,0,2,&#x27;13800001234&#x27;,&#x27;北京朝阳&#x27;,&#x27;1980-1-1&#x27;,&#x27;text123@qq.com&#x27;,&#x27;123456198001011234&#x27;),  </span><br><span class="line">(1001,&#x27;123456&#x27;,&#x27;赵强&#x27;,1,3,&#x27;13800002222&#x27;,&#x27;广东深圳&#x27;,&#x27;1990-1-1&#x27;,&#x27;text111@qq.com&#x27;,&#x27;123456199001011233&#x27;);  </span><br><span class="line">  </span><br><span class="line">-- 插入成绩数据 这里仅插入了一组，其余自行添加  </span><br><span class="line">insert into `result`(`studentno`,`subjectno`,`examdate`,`studentresult`)  </span><br><span class="line">values  </span><br><span class="line">(1000,1,&#x27;2013-11-11 16:00:00&#x27;,85),  </span><br><span class="line">(1000,2,&#x27;2013-11-12 16:00:00&#x27;,70),  </span><br><span class="line">(1000,3,&#x27;2013-11-11 09:00:00&#x27;,68),  </span><br><span class="line">(1000,4,&#x27;2013-11-13 16:00:00&#x27;,98),  </span><br><span class="line">(1000,5,&#x27;2013-11-14 16:00:00&#x27;,58),</span><br><span class="line">(1001,5,&#x27;2013-11-14 16:00:00&#x27;,51),</span><br><span class="line">(1001,1,&#x27;2013-11-11 16:00:00&#x27;,82),</span><br><span class="line">(1001,2,&#x27;2013-11-12 16:00:00&#x27;,79),</span><br><span class="line">(1001,3,&#x27;2013-11-11 09:00:00&#x27;,64),</span><br><span class="line">(1001,4,&#x27;2013-11-13 16:00:00&#x27;,90),</span><br><span class="line">(1001,5,&#x27;2013-11-14 16:00:00&#x27;,50);</span><br><span class="line"></span><br><span class="line">-- 插入年级数据  </span><br><span class="line">insert into `grade` (`gradeid`,`gradename`) values(1,&#x27;大一&#x27;),(2,&#x27;大二&#x27;),(3,&#x27;大三&#x27;),(4,&#x27;大四&#x27;),(5,&#x27;预科班&#x27;);</span><br><span class="line"></span><br><span class="line">-- 插入科目数据</span><br><span class="line">insert into `subject`(`subjectno`,`subjectname`,`classhour`,`gradeid`)values  </span><br><span class="line">(1,&#x27;高等数学-1&#x27;,110,1),  </span><br><span class="line">(2,&#x27;高等数学-2&#x27;,110,2),  </span><br><span class="line">(3,&#x27;高等数学-3&#x27;,100,3),  </span><br><span class="line">(4,&#x27;高等数学-4&#x27;,130,4),  </span><br><span class="line">(5,&#x27;C语言-1&#x27;,110,1),  </span><br><span class="line">(6,&#x27;C语言-2&#x27;,110,2),  </span><br><span class="line">(7,&#x27;C语言-3&#x27;,100,3),  </span><br><span class="line">(8,&#x27;C语言-4&#x27;,130,4),  </span><br><span class="line">(9,&#x27;Java程序设计-1&#x27;,110,1),  </span><br><span class="line">(10,&#x27;Java程序设计-2&#x27;,110,2),  </span><br><span class="line">(11,&#x27;Java程序设计-3&#x27;,100,3),  </span><br><span class="line">(12,&#x27;Java程序设计-4&#x27;,130,4),  </span><br><span class="line">(13,&#x27;数据库结构-1&#x27;,110,1),  </span><br><span class="line">(14,&#x27;数据库结构-2&#x27;,110,2),  </span><br><span class="line">(15,&#x27;数据库结构-3&#x27;,100,3),  </span><br><span class="line">(16,&#x27;数据库结构-4&#x27;,130,4),  </span><br><span class="line">(17,&#x27;C#基础&#x27;,130,1);</span><br></pre></td></tr></table></figure>
<h3 id="查询字段">3.3.2. 查询字段</h3>
<p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段 [AS 别名, ...] FROM 表[ AS 表别名]; # 起别名时 as 可以省略</span><br></pre></td></tr></table></figure>
<ul>
<li>如果为字段取了别名，则在该语句中使用该字段时（比如 where
中使用），要使用别名！</li>
<li>如果表起别名，该语句中中使用表名时，也要使用别名（联表查询有这个例子）</li>
</ul>
<p>1、查询指定字段： <code>SELECT 字段1[,字段2,...] FROM 表;</code></p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408202228.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>2、查询全部字段：<code>SELECT * FROM 表;</code></p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408202248.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>3、可以给字段、表起别名：<code>SELECT 字段1 AS 别名1[,字段2 AS 别名2,...] FROM 表 AS 表别名;</code></p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408202408.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>4、函数——拼接字符串：<code>concat(str1, str2)</code>；</p>
<p><img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408202447.png" /></p>
<p>5、查询哪些同学参加了考试： 1. 查询 <code>result</code> 表； 2. 去重
<code>DISTINCT</code></p>
<p>去重前后对比：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408202805.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h3 id="查询表达式">3.3.3. 查询表达式</h3>
<p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 表达式 FROM 表[ AS 表别名]; # 起别名时 as 可以省略</span><br></pre></td></tr></table></figure>
<p>1、查询 MySQL 版本：<code>SELECT version();</code>（函数）</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408202848.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>2、计算（计算表达式）</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408203244.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>3、查询自增步长 （变量）</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408203302.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>4、学员考试成绩全部加 1：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408203346.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>表达式可以有：文本值、列、NULL、函数、计算表达式、系统变量等；</p>
<h3 id="where-条件子句">3.3.4. WHERE 条件子句</h3>
<p>作用：检索数据中 <strong>符合条件</strong> 的值。</p>
<p>1、逻辑运算符</p>
<table>
<thead>
<tr class="header">
<th>符号</th>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>and 或者 &amp;&amp;</td>
<td>a and b 或者 a &amp;&amp; b</td>
<td>尽量使用 and</td>
</tr>
<tr class="even">
<td>or 或者 ||</td>
<td>a or b 或者 a || b</td>
<td>尽量使用 or</td>
</tr>
<tr class="odd">
<td>not 或者 !</td>
<td>not a 或者 !a</td>
<td>尽量使用 not</td>
</tr>
</tbody>
</table>
<p>查询考试成绩在 80 ~ 100 的成绩 （两种写法）：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408203953.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>查询 1000 号学生之外的成绩 （两种写法）：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408204059.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>2、模糊查询（比较运算符）</p>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 23%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="header">
<th>运算符</th>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>IS NULL</td>
<td>a is null</td>
<td>如果 a 为 null，则结果为真，否则为假</td>
</tr>
<tr class="even">
<td>IS NOT NULL</td>
<td>a is not null</td>
<td>如果 a 不为 null，则结果为真，否则为假</td>
</tr>
<tr class="odd">
<td>BETWEEN</td>
<td>c BETWEEN a AND b</td>
<td>若 c 在 <code>[a, b]</code> 之内，则结果为真，否则为假</td>
</tr>
<tr class="even">
<td>LIKE</td>
<td>a like b</td>
<td>SQL 匹配，如果 a 里面有 b，则结果为真，否则为假</td>
</tr>
<tr class="odd">
<td>IN</td>
<td>a in (a, b, c,...)</td>
<td>如果 a 在集合内，则结果为真，否则为假</td>
</tr>
</tbody>
</table>
<blockquote>
<p>LIKE 可以配合 <code>%</code>（任意个字符，包括 0
个），<code>_</code>（一个字符）；</p>
</blockquote>
<p>查找张姓同学：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408204702.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>查找年级 id 在 (1,2,3,4)的信息：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408205238.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h2 id="联表查询">3.4. 联表查询</h2>
<h3 id="主要内容">3.4.1. 主要内容</h3>
<p>总共有如下 7 种 join 查询，使用的语句
<code>JOIN ... ON ...</code>：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/MySQL%E5%85%A5%E9%97%A8_join.jpg"
alt="MySQL入门_join" />
<figcaption aria-hidden="true">MySQL入门_join</figcaption>
</figure>
<blockquote>
<p>本质上只有 3 种，第二行的 3 个。</p>
</blockquote>
<p>为了后面的演示，先在 <code>student</code> 插入一条记录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into `student` (`studentno`,`loginpwd`,`studentname`,`sex`,`gradeid`,`phone`,`address`,`borndate`,`email`,`identitycard`)</span><br><span class="line">values(1002,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;张三&#x27;</span>,0,2,<span class="string">&#x27;13803201234&#x27;</span>,<span class="string">&#x27;陕西西安&#x27;</span>,<span class="string">&#x27;1980-2-1&#x27;</span>,<span class="string">&#x27;t123t123@qq.com&#x27;</span>,<span class="string">&#x27;1234561980234&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>联表查询步骤：</p>
<ol type="1">
<li>分析需求，分析查询的字段来自哪些表；</li>
<li>确定使用哪种连接；
<ol type="1">
<li>确定交叉点，使用 <code>ON</code> 来判断；</li>
</ol></li>
</ol>
<p>假设我们需要查询参加了考试的同学的学号、姓名、科目编号以及分数。</p>
<ol type="1">
<li>这些字段来自 <code>student</code> 和 <code>result</code>
两张表；</li>
<li>我们的目的是要参加了考试的同学的信息，所以应该以 <code>result</code>
为主，逻辑应该是“先查询 <code>result</code> 中的所有信息，然后再查询
<code>student</code> 表，如果 <code>student</code> 表中有学号相同的
(交叉点)，则把姓名也作为查询结果”；</li>
</ol>
<p>使用 <code>left join</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.studentno, s.studentname, subjectno, studentresult from result r left join student s on s.studentno=r.studentno;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408213907.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>也可以使用
<code>right join</code>，不过两张表的位置要换一下，两者结果一样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.studentno, s.studentname, subjectno, studentresult from student s right join result r on s.studentno=r.studentno;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408214011.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>如果使用 <code>right join</code>
而不交换表的位置会出现什么结果呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.studentno, s.studentname, subjectno, studentresult from result r right join student s on s.studentno=r.studentno;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408214127.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>可以看到，与上面作比较，多了一行
<code>张三</code>。这句查询语句的意思是：</p>
<ul>
<li>先从 <code>student</code>
表中查询所有的学生信息（学号和姓名）；</li>
<li>然后查询 <code>result</code>
表，如果该表中存在学号和上一步中获取的学号相同的记录，则把这些记录的科目编号、分数作为结果返回；</li>
</ul>
<p>注意把两个分析作对比，可以看到两张表在两种分析的环境中的重要程度不同，第一次分析的时候是以
<code>result</code> 表为主，<code>student</code>
表为辅，而第二次分析则正好相反，这就是 <code>left join</code> 和
<code>right join</code> 的区别：</p>
<ol type="1">
<li><code>table1 left join table2</code>：以 <code>table1</code>
为主表，先获取查询结果，然后再查询 <code>table2</code>，如果
<code>table2</code> 中与 <code>table1</code> 有交叉（即 <code>on</code>
后面的条件满足）则把这些记录也作为结果返回；</li>
<li><code>table1 right join table2</code>：以 <code>table2</code>
为主表，先获取查询结果，然后再查询 <code>table1</code>，如果
<code>table1</code> 中与 <code>table2</code> 有交叉（即 <code>on</code>
后面的条件满足）则把这些记录也作为结果返回；</li>
</ol>
<p>理解了这一点之后，再来看一下
<code>inner join</code>，<code>inner join</code> 就没有主表之分了：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.studentno, s.studentname, subjectno, studentresult from result r inner join student s on s.studentno=r.studentno;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408214848.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>往 <code>result</code> 表插入如下记录后使用 <code>inner join</code>
再次查询</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into `result`(`studentno`,`subjectno`,`examdate`,`studentresult`)  values(1002,1,&#x27;2013-11-11 16:00:00&#x27;,10);</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408214829.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>两者的区别就在于最后一行的 <code>张三</code>，分析：</p>
<ol type="1">
<li>MySQL 会先去查看 <code>student</code>（或者 <code>result</code>
无所谓），获取其中所有的记录，记作结果 A；</li>
<li>然后查看 <code>result</code>，获取其中所有的记录，记作结果 B；</li>
<li>然后把 A 和 B 作对比，如果 A 和 B 的记录满足 <code>on</code>
后面的条件，则返回作为结果；</li>
</ol>
<p>以第一条记录为例，<code>student</code> 中的记录是</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408215335.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p><code>result</code> 中的记录是：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408215340.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p><code>student</code> 表中的第一条记录拿着 <code>studentno</code> 去
<code>result</code> 中的记录做比较，发现前 4 条都满足，则将 4 条记录和
<code>student</code> 表的第一条记录按照查询字段的格式整理成：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408215440.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>对 3 者的总结：</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="header">
<th>操作</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>inner join</code></td>
<td>查询两张表的交集，也就是 <code>on</code> 后面条件满足的</td>
</tr>
<tr class="even">
<td><code>left join</code></td>
<td>查询左表的所有记录，然后拿着 <code>on</code>
后面的条件去右表查询，如果右表有满足条件的记录，则一并返回</td>
</tr>
<tr class="odd">
<td><code>right join</code></td>
<td>查询右表的所有记录，然后拿着 <code>on</code>
后面的条件去左表查询，如果左表有满足条件的记录，则一并返回</td>
</tr>
</tbody>
</table>
<h3 id="其他内容">3.4.2. 其他内容</h3>
<h4 id="where-的使用">3.4.2.1. Where 的使用</h4>
<p>比如查询不及格的同学，我们就可以查询所有的
<code>student</code>，然后查询
<code>result</code>，这样得到的结果是所有的同学和这些同学的结果，此时使用
`where 不及格 即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.studentno, s.studentname, subjectno, studentresult from result r right join student s on s.studentno=r.studentno where studentresult is NULL;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408220142.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h4 id="注意事项">3.4.2.2. 注意事项</h4>
<p>以下面语句为例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s.studentno, s.studentname, subjectno, studentresult from result r right join student s on s.studentno=r.studentno where studentresult is NULL;</span><br></pre></td></tr></table></figure>
<p>可以看到我们查询了 4 个字段，但只有前两个字段前面有 <code>s.</code>
为什么呢？</p>
<ul>
<li>因为，<code>student</code> 和 <code>result</code> 两张表都有
<code>studetnno</code> 和
<code>studentname</code>，此时就需要判断你要使用哪张表的字段，MySQL
不会做判断，所以需要用户指出来，否则报错；</li>
<li>如果某个字段只有一张表有，就不需要点，否则就需要；</li>
</ul>
<h4 id="思考题">3.4.2.3. 思考题</h4>
<blockquote>
<p>先把张三的考试信息（<code>result</code>）记录删除；</p>
</blockquote>
<p>查询参加了考试的同学信息（学号、学生姓名、科目名、分数）</p>
<ol type="1">
<li>分析需求，学号和姓名在 <code>student</code> 表，科目名在
<code>subject</code> 表，分数在 <code>result</code> 表；</li>
<li>确定使用哪种连接查询；
<ol type="1">
<li>所有参加了考试的同学信息，应该以 <code>result</code>
为主，因为该表中有记录，则说明有参加考试，该表没记录，则说明没参加考试；</li>
<li>确定交叉点，和 <code>student</code> 表的交叉点是
<code>studentno</code>，和 <code>subject</code> 的交叉点是
<code>subjectno</code>，因此可以先 <code>left join</code>
成绩表和学生表，然后把前面的结果再和科目表 <code>left join</code>；</li>
</ol></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s1.studentno, s1.studentname, s2.subjectname, r.studentresult from result r left join student s1 on r.studentno=s1.studentno left join subject s2 on r.subjectno=s2.subjectno;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408220924.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>可以看到没有张三的记录，说明结果正确。</p>
<h3 id="自连接">3.4.3. 自连接</h3>
<p>假设存在这样一张表：</p>
<table>
<thead>
<tr class="header">
<th>pid</th>
<th>sid</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>2</td>
<td>信息技术</td>
</tr>
<tr class="even">
<td>1</td>
<td>3</td>
<td>软件开发</td>
</tr>
<tr class="odd">
<td>1</td>
<td>5</td>
<td>美术设计</td>
</tr>
<tr class="even">
<td>2</td>
<td>8</td>
<td>办公信息</td>
</tr>
<tr class="odd">
<td>3</td>
<td>4</td>
<td>数据库</td>
</tr>
<tr class="even">
<td>3</td>
<td>6</td>
<td>web 开发</td>
</tr>
<tr class="odd">
<td>5</td>
<td>7</td>
<td>ps 技术</td>
</tr>
</tbody>
</table>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408223046.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>Pid 就是父分类的 id，sid 就是子分类的 id，比如第一条记录：信息技术的
pid 是 1，意味着信息技术是 pid 为 1 的大类的一个子类，其 sid 为
2，类似的，办公信息就是 pid 为 2 的大类下的一个小类，其 sid 为 8。</p>
<p>现在需求：要求查询出来的结果是
“父分类，子分类”的结构，即最后的结果是：</p>
<table>
<thead>
<tr class="header">
<th>父分类</th>
<th>子分类</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>软件开发</td>
<td>数据库</td>
</tr>
<tr class="even">
<td>软件开发</td>
<td>web 开发</td>
</tr>
<tr class="odd">
<td>美术设计</td>
<td>ps 技术</td>
</tr>
<tr class="even">
<td>信息技术</td>
<td>办公信息</td>
</tr>
</tbody>
</table>
<p>想要查询到上述结构：</p>
<ol type="1">
<li>查询一遍该表，获得所有记录 A；</li>
<li>再查询一遍改变，获得所有记录 B；</li>
<li>将 A 中 <code>pid</code> 和 B 中 <code>sid</code> 相同的记录返回，A
中的作为父分类，B 中的作为子分类；</li>
</ol>
<p>像这样把一张表当做两张表查就是自连接情况，语句如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select p.name as 父分类, s.name as 子分类</span><br><span class="line">from category as p, category as s</span><br><span class="line">where p.pid=s.sid;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230408223811.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>上图中，第一次查询是查看 <code>category</code>
的信息，第二次才是使用上述语句查询，符合结果。</p>
<h2 id="分页和排序">3.5. 分页和排序</h2>
<h3 id="排序">3.5.1. 排序</h3>
<p>语句：<code>ORDER BY 字段 排序方式</code>，其中排序方式有：</p>
<ul>
<li>升序：<code>ASC</code>；</li>
<li>降序：<code>DESC;</code></li>
</ul>
<p>作用：就是把查询结果根据字段进行排序。</p>
<p>比如把成绩安装降序的方式进行排序，命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from result order by studentresult DESC;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409090711.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h3 id="分页">3.5.2. 分页</h3>
<p>语句：<code>LIMIT 起始记录, 记录条数</code>，其中起始记录从 0
开始，该语句放在整个查询语句的最后面，</p>
<p>作用：设置返回的结果，如果表内数据很多，一次性全部返回内存压力很大，所以才有了分页操作。</p>
<p>比如，我们只想显示成绩前 5 的记录，命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from result order by studentresult DESC limit 0, 5;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409090852.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>为什么叫做分页呢？</p>
<ul>
<li>如果把 <code>limit 0,5</code> 看做是第一页，并且每页 5 条记录，那么
<code>limit 5, 5</code> 就是第二页，<code>limit 10, 5</code>
就是第三页，依次类推，第 n 页就是 <code>limit (n-1)*5, 5</code>。</li>
</ul>
<h3 id="思考题-1">3.5.3. 思考题</h3>
<p>查询“高等数学-1”课程成绩第一的学生，并且分数要高于
80（学号、姓名、课程名称、分数）。</p>
<p>需求分析：</p>
<ul>
<li>学号、姓名可以在 <code>student</code> 表内，课程名称在
<code>subject</code> 表内，分数在 <code>result</code>
表内，因此需要使用联表查询，即
<code>s1.studentno, s1.studentname, s2.subjectname, r.studentresult from result r inner join student s1 on r.studentno = s1.studentno inner join subject s2 on r.subjectno = s2.subjectno</code>；</li>
<li>课程名称为 <code>高等数学-1</code>，并且分数高于 80，即
<code>where s2.subjectname =  '高等数学-1'and r.studentresult &gt; 80</code></li>
<li>课程成绩第一，主表应该是
<code>result</code>，并且根据课程成绩降序排列，即
<code>order by r.studentresult desc</code>；</li>
<li>课程成绩第一，说明只需要一条记录，所以使用
<code>limit 0,1</code>；</li>
</ul>
<p>组合成完整的命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select s1.studentno, s1.studentname, s2.subjectname, r.studentresult from result r inner join student s1 on r.studentno = s1.studentno inner join subject s2 on r.subjectno = s2.subjectno where s2.subjectname = &#x27;高等数学-1&#x27; and r.studentresult &gt; 80 order by r.studentresult desc limit 0, 1;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409092129.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>需要注意查询语句中各个内容所在的位置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 表达式 from 表 [联表] [where子句] [order by] [limit];</span><br></pre></td></tr></table></figure>
<h2 id="子查询和嵌套查询">3.6. 子查询和嵌套查询</h2>
<p>题目
1：查询“高等数学-2”的所有考试结果（学号，科目编号，成绩），降序排列。</p>
<p>方式一：连接查询</p>
<p>分析：</p>
<ol type="1">
<li>学号来自 <code>student</code>，科目编号、成绩来自
<code>result</code>，<code>student</code> 和 <code>result</code>
的交叉在于 <code>studentno</code>，“高等数学-2”来自
<code>subject</code>；</li>
<li>条件 <code>where subjectname='高等数学-2'</code>；</li>
<li>排列方式：<code>order by studentresult desc</code>；</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select stu.studentno, sub.subjectno, r.studentresult from result r inner join student stu on r.studentno = stu.studentno inner join subject sub on r.subjectno = sub.subjectno where sub.subjectname = &#x27;高等数学-2&#x27; order by r.studentresult desc;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409100528.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>方式二：子查询（由里及外）</p>
<p>可以分为两次理解：</p>
<ol type="1">
<li>从 <code>result</code>
表中查询“高等数学-2”的所有考试结果，也就是：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select studentno, subjectname, studentresult from result where subjectname=“高等数学-2”;</span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>因为 <code>result</code> 表没有 <code>subjectname</code>，所以 where
子句不好满足，但 <code>result</code> 有
<code>subjectno</code>，因此可以将
<code>where subjectname=“高等数学-2”</code> 变为
<code>where subjectno=“高等数学-2”的编号</code>，“高等数学-2”的编号可以从
<code>subject</code> 中获得，使用
<code>select subjectno from subject where subjectname='高等数学-2'</code>，所以组合就成为了：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">where subjectno=(select subjectno from subject where subjectname=&#x27;高等数学-2&#x27;)</span><br></pre></td></tr></table></figure>
<p>将两步合为一步，得到如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select studentno, subjectno, studentresult from result r where subjectno=(select subjectno from subject where subjectname=&quot;高等数学-2&quot;);</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409100707.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<blockquote>
<p>子查询有一个重要的限制，那就是查询的字段要都在一张表中，比如这里的学号，科目编号，成绩都可以在
<code>result</code> 表中找到。</p>
</blockquote>
<p>题目 2：查询“高等数学-2”分数不小于 75 分的学生学号和姓名。</p>
<p>联表查询：</p>
<ul>
<li>“高等数学-2”在 <code>subject</code> 表，学号和姓名在
<code>student</code> 表，成绩在 <code>result</code>
表，要找学号和姓名，因此可以以 <code>student</code> 为主。交叉点有两个
<code>student.studentno = result.studetno</code> 和
<code>result.subjectno = subject.subjectno</code></li>
<li>条件
<code>where result.studentresult &gt;= 75 and subject.subjectname='高等数学-2'</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select stu.studentno, stu.studentname from student stu inner join result r on stu.studentno = r.studentno inner join subject sub on r.subjectno = sub.subjectno where sub.subjectname=&#x27;高等数学-2&#x27; and r.studentresult &gt;= 75;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409101837.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>子查询：</p>
<ul>
<li>从学生表里找到所有学生的学号和姓名，条件时
<code>where result.studentresult &gt;= 75 and subject.subjectname='高等数学-2'</code></li>
<li>对两个条件分别分析：
<ul>
<li><code>result.studentresult &gt;= 75</code>：<code>student</code>
表没有 <code>studentresult</code>，与 <code>result</code> 表有关联的是
<code>studentno</code>，所以可以改为
<code>where studentno=(result表内成绩大于等于75的记录的studentno)</code>，即
<code>where studentno=(select studentno from result where studentresult &gt;= 75)</code></li>
<li><code>subject.subjectname='高等数学-2'</code>：<code>student</code>
表和 <code>subject</code> 表没有任何关联，而 <code>result</code> 表和
<code>subject</code> 表有关联，所以该语句应该和第一个条件结合，写成
<code>where studentno=(select studentno from result where studentresult &gt;= 75 and subjectno=(subject表中subjectname为高等数学-2的记录的subjectno))</code>，即
<code>where studentno=(select studentno from result where studentresult &gt;= 75 and subjectno=(select subjectno from subject where subjectname='高等数学-2'))</code></li>
</ul></li>
</ul>
<p>因此最终的命令为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select studentno, studentname from student where studentno=(select studentno from result where studentresult &gt;= 75 and subjectno=(select subjectno from subject where subjectname=&#x27;高等数学-2&#x27;));</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409102557.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h3 id="注意">3.6.1. 注意</h3>
<ol type="1">
<li>子查询有一个重要的限制，那就是 <strong>查询的字段</strong>
要都在一张表中，比如题目 1的学号，科目编号，成绩都可以在
<code>result</code> 表中找到。</li>
<li>在满足第一点的情况下，查询的条件可能一张表无法满足，所以需要引入其他表的某个或某些字段作为条件；</li>
<li>先查询 <code>where</code>
内的子查询，把子查询的结果给外层条件作为筛选，由内及外的一层一层查询；</li>
<li>子查询的本质是查询一张表，其他表只是作为条件，所以结果只能是一张表的字段；这和联表查询不一样，联表查询的本质是多张表一起查询，所以结果可以是多张表的字段；</li>
<li>子查询效率低于联表查询；</li>
</ol>
<h2 id="分组和过滤">3.7. 分组和过滤</h2>
<p>题目 1：查询不同课程的平均分、最高分、最低分。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select sub.subjectname, avg(r.studentresult), max(r.studentresult), min(r.studentresult) from result r inner join subject sub on r.subjectno=sub.subjectno;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409115110.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>这条语句会报错的，原因很简单，在 <code>result</code> 表和
<code>subject</code> 表中，<code>subjectname</code>
可以有很多个，但平均分、最高分、最低分只会有一个计算结果，会导致结果个数不匹配，而我们要求的是不同课程的平均分、最高分、最低分，所以不能计算整张表的平均分、最高分、最低分，而是分成不同组来计算，分组的条件就是课程名称，所以真正的语句如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select sub.subjectname, avg(r.studentresult), max(r.studentresult), min(r.studentresult) from result r inner join subject sub on r.subjectno=sub.subjectno group by sub.subjectname;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409115351.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>题目 2：在题目 1 的基础上增加一个条件，要求只显示平均分不小于 70
的才显示。</p>
<p>很自然的会这么写：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select sub.subjectname, avg(r.studentresult), max(r.studentresult), min(r.studentresult) from result r inner join subject sub on r.subjectno=sub.subjectno where avg(r.studentresult) &gt;= 70 group by sub.subjectname;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409115510.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>报错了，因为 <code>where</code> 语句是在查询完成之后进行的操作，而
<code>group by</code> 在 <code>where</code>
后面，此时语句还没有执行完成，所以报错，因此 <code>group by</code>
不使用 <code>where</code> 来过滤，而是使用
<code>having</code>，命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select sub.subjectname, avg(r.studentresult), max(r.studentresult), min(r.studentresult) from result r inner join subject sub on r.subjectno=sub.subjectno group by sub.subjectname having avg(r.studentresult) &gt;= 70;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409115643.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p><code>having</code> 后面的内容和 <code>where</code> 一样，只不过
<code>having</code> 的位置在 <code>group by</code> 后面，所以执行到
<code>having</code> 时，前面已经执行完毕，查询结果已经得到，此时通过
<code>having</code> 过滤就不会报错。</p>
<h1 id="函数">4. 函数</h1>
<ul>
<li>可以看一下 [[4. 数据库内置函数研究]]；</li>
<li>或者直接网上搜</li>
<li>又或者官方文档：<a
target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/built-in-function-reference.html">MySQL
:: MySQL 8.0 Reference Manual :: 12.1 Built-In Function and Operator
Reference</a></li>
</ul>
<h2 id="count-相关问题">4.1. Count 相关问题</h2>
<p>先向 <code>subject</code> 表插入一条记录，其内容为：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409113716.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>命令 1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(gradeid) from subject;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409113807.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>结果是有 17 条记录。</p>
<p>命令 2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(*) from subject;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409113834.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>命令 3：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(1) from subject; # 或者 count(任意数字)</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409113916.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>命令 2 和命令 3 的结果都是 18 条记录，实际上也是 18 条记录。</p>
<p><code>count(列名)</code> 和
<code>count(*)</code>、<code>count(1)</code> 的区别是：前者会忽略 null
值，而后面的两者不会忽略 null 值，即前者会统计非 null
值的记录数，而后者会统计所有的记录数。</p>
<p><code>count(*)</code> 和 <code>count(1)</code> 的区别：</p>
<ul>
<li>前者包括了所有的列，相当于行数，在统计结果的时候，<strong>不会忽略为
NULL 的值</strong></li>
<li>后者忽略所有列，用1代表每行记录，在统计结果的时候，<strong>不会忽略为
NULL 的值</strong></li>
</ul>
<p>执行效率上：</p>
<ul>
<li>列名为主键，<code>count(列名</code>)会比 <code>count(1)</code>
快</li>
<li>列名不为主键，<code>count(1)</code>会比<code>count(列名)</code>快</li>
<li>如果表多个列并且没有主键，则 <code>count(1)</code> 的执行效率优于
<code>count(*)</code></li>
<li>如果有主键，则
<code>select count（主键）</code>的执行效率是最优的</li>
<li>如果表只有一个字段，则 <code>select count(*)</code> 最优。</li>
</ul>
<p>可以看一下 <code>select * from subject</code> 和
<code>select 1 from subject</code> ：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409114349.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>后者估计在获得前者的数据后进一步做了操作，所以导致
<code>count(1)</code> 效率略低于 <code>count(*)</code>。</p>
<h2 id="数据库级别的-md5-加密">4.2. 数据库级别的 <code>MD5</code>
加密</h2>
<p>可以使用 <code>md(5)</code> 函数进行加密。</p>
<h1 id="事务">5. 事务</h1>
<h2 id="概述-1">5.1. 概述</h2>
<p>一个简单的事物——转账（A 给 B 转账 100），分为两步：</p>
<ol type="1">
<li>A 原先有 1000，向 B 转账 100，此时 A 账户余额为 900；</li>
<li>B 原先有 1000，接收来自 A 的转账，此时 B 账户余额为 1100；</li>
</ol>
<p>这两步都完成才称得上是一个完整的事务。</p>
<p>事务原则：ACID 原则。ACID 概念：<a
target="_blank" rel="noopener" href="https://zh.wikipedia.org/zh-hans/ACID">ACID -
维基百科，自由的百科全书</a></p>
<p>ACID，是指数据库管理系统（DBMS）在写入或更新资料的过程中，为保证交易（transaction）是正确可靠的，所必须具备的四个特性：原子性（atomicity，或称不可分割性）、一致性（consistency）、隔离性（isolation，又称独立性）、持久性（durability）。</p>
<p>在数据库系统中，一个事务是指：由一系列数据库操作组成的一个完整的逻辑过程。例如银行转帐，从原账户扣除金额，以及向目标账户添加金额，这两个数据库操作的总和，构成一个完整的逻辑过程，不可拆分。这个过程被称为一个事务，具有
ACID 特性。</p>
<ul>
<li>原子性（Atomicity）：一个事务（transaction）中的所有操作，<strong>或者全部完成，或者全部不完成</strong>，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。即，事务不可分割、不可约简。</li>
<li>一致性（Consistency）：在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设约束、触发器、级联回滚等。</li>
<li>事务隔离（Isolation）：数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括未提交读（Read
uncommitted）、提交读（read committed）、可重复读（Repeatable
read）和序列化（Serializable）。</li>
<li>持久性（Durability）：事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失，事务一旦处理完成不可逆。</li>
</ul>
<p>事务的并发操作可能会出现 <strong>脏读、不可重复读、幻读</strong>
三个问题。</p>
<ul>
<li><strong>脏读</strong>：
<ul>
<li>事例：老板要给程序员发工资，程序员的工资是 3.6
万/月。但是发工资时老板不小心按错了数字，按成 3.9
万/月，该钱已经打到程序员的户口，但是事务还没有提交，就在这时，程序员去查看自己这个月的工资，发现比往常多了
3
千元，以为涨工资了非常高兴。但是老板及时发现了不对，马上回滚差点就提交了的事务，将数字改成
3.6 万再提交；</li>
<li>解释：A 事务获取了 B 事务还没提交的数据；</li>
</ul></li>
<li><strong>不可重复读</strong>：
<ul>
<li>事例：程序员拿着信用卡去享受生活（卡里当然是只有 3.6
万），当他买单时（程序员事务开启），收费系统事先检测到他的卡里有 3.6
万，<strong>就在这个时候</strong>！！程序员的妻子要把钱全部转出充当家用，并提交。当收费系统准备扣款时，再检测卡里的金额，发现已经没钱了（第二次检测金额当然要等待妻子转出金额事务提交完）。程序员就会很郁闷，明明卡里是有钱的…</li>
<li>解释：这个事例中，出现了一个事务范围内（程序员事务）两个相同的查询（妻子转钱前后）却返回了不同数据，这就是不可重复读；</li>
</ul></li>
<li><strong>幻读</strong>：
<ul>
<li>事例：程序员某一天去消费，花了 2
千元，然后他的妻子去查看他今天的消费记录（全表扫描
FTS，妻子事务开启），看到确实是花了 2 千元，就在这个时候，程序员花了 1
万买了一部电脑，即新增 INSERT
了一条消费记录，并提交。当妻子打印程序员的消费记录清单时（妻子事务提交），发现花了
1.2 万元，似乎出现了幻觉，这就是幻读；</li>
<li>解释：A 事务内的两个查询之前有 B
事务<strong>插入新的数据</strong>，导致前后两次查询结果不同；</li>
</ul></li>
</ul>
<p>其中，事务隔离分为不同级别，级别依次升高：</p>
<ol type="1">
<li>Read uncommitted：就是 A 事务可以读取未提交的 B
事务的数据，什么问题都不能解决；</li>
<li>Read committed：就是 A 事务要等 B
事务提交后才能读取数据。可以解决脏读问题，但不能解决不可重复读；</li>
<li>Repeatable
read：就是在开始读取数据（事务开启）时，不再允许<strong>修改操作</strong>。可以解决不可重复读问题，无法解决幻读，因为幻读最重要的是在事务提交前，另一个事务插入了记录，幻读是
INSERT 导致的，不是 UPDATE；</li>
<li>Serializable：最高的事务隔离级别，在该级别下，事务串行化顺序执行，可以避免脏读、不可重复读与幻读。但是这种事务隔离级别效率低下，比较耗数据库性能，一般不使用；</li>
</ol>
<h2 id="执行事务">5.2. 执行事务</h2>
<p>MySQL 默认开启事务自动提交，可以查 <code>autocommit</code>
变量查看，一些语句：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. set autocommit = 0; # 关闭事务自动提交</span><br><span class="line">2. set autocommit = 1; # 开启事务自动提交</span><br><span class="line">3. START TRANSACTION;  # 标记一个事务的开始，从这之后的sql语句都属于同一个事务</span><br><span class="line">4. COMMIT; # 提交事务（表示事务处理成功）</span><br><span class="line">5. ROLLBACK; # 回到事务开启前的样子（表示事务处理失败）</span><br><span class="line">6. SAVEPOINT 保存点名 # 设置一个事务的保存点</span><br><span class="line">7. ROLLBACK TO SAVEPOINT 保存点名 # 回滚到一个事务的保存点</span><br><span class="line">8. RELEASE SAVEPOINT 保存点名 # 撤销保存点</span><br></pre></td></tr></table></figure>
<p>一组事务完整执行的流程图：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409201710.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<hr />
<p>模拟转账事务：</p>
<p>环境准备，创建一个数据库 <code>bank</code>，在其下创建一张表
<code>account</code>，添加两条记录 A, B 默认余额 1000。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE `bank` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</span><br><span class="line"></span><br><span class="line">CREATE TABLE `account`(</span><br><span class="line">`id` int AUTO_INCREMENT NOT NULL,</span><br><span class="line">`name` varchar(30) NOT NULL,</span><br><span class="line">`money` decimal(9, 2) NOT NULL,</span><br><span class="line">PRIMARY KEY(`id`)</span><br><span class="line">)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;</span><br><span class="line"></span><br><span class="line"># decimal(P, D)，表示可以存储一个P位的数，其中小数有D位</span><br><span class="line"></span><br><span class="line">INSERT INTO `account` (`name`, `money`) VALUES(&#x27;A&#x27;, &#x27;1000.00&#x27;), (&#x27;B&#x27;, &#x27;1000.00&#x27;);</span><br></pre></td></tr></table></figure>
<p>事务命令；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. SET autocommit = 0;</span><br><span class="line">2. START TRANSACTION;</span><br><span class="line">3. UPDATE account SET money = money - 200 WHERE `name` = &#x27;A&#x27;;</span><br><span class="line">4. UPDATE account SET money = money + 200 WHERE `name` = &#x27;B&#x27;;</span><br><span class="line">5. COMMIT; 或者 ROLLBACK;</span><br><span class="line">6. SET autocommit = 1; # 如果是 ROLLBACK 则不需要这句</span><br></pre></td></tr></table></figure>
<p>先来一个回滚的：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409201607.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>可以看到，回滚使数据恢复成事务刚开始的样子。</p>
<p>来一个提交的：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409201859.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>可以看到，提交之后，表内数据发生了变化，并且通过回滚也无法恢复，这就是持久化的体现。最后开启自动提交。</p>
<h1 id="索引">6. 索引</h1>
<p>MySQL 官方对索引的定义：索引（Index）是帮助 MySQL
高效获取数据的数据结构。</p>
<ul>
<li>索引的本质是数据结构；</li>
<li>索引的作用是使获取数据更高效；</li>
</ul>
<p>索引底层分析：<a
target="_blank" rel="noopener" href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html">CodingLabs
- MySQL索引背后的数据结构及算法原理</a></p>
<h2 id="索引的分类">6.1. 索引的分类</h2>
<p>索引分为：</p>
<ol type="1">
<li>主键索引；
<ol type="1">
<li>一个表中唯一的标识，主键不可重复，只能有一个列作为主键；</li>
</ol></li>
<li>唯一索引；
<ol type="1">
<li>避免同一列有重复的值出现，唯一索引可以重复，多个列都可以标识为唯一索引；</li>
<li>解释：如果一个列标识为唯一索引，那么<strong>该表所有记录的这一列的值不能重复</strong>，可以理解为去重；</li>
</ol></li>
<li>常规索引；
<ol type="1">
<li>默认的，使用 <code>index</code> 或 <code>key</code> 来设置；</li>
</ol></li>
<li>全文索引；
<ol type="1">
<li>快速定位数据；</li>
<li>在特定的数据块引擎下才有 (MyISAM)，现在 InnoDB 也有了；</li>
</ol></li>
</ol>
<p>索引可以在创建表的时候给字段增加索引，也可以在表创建完毕之后，增加索引。</p>
<p>创建时：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">-- 主键索引</span><br><span class="line">CREATE TABLE `users` (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `username` varchar(50) DEFAULT NULL,</span><br><span class="line">  `sex` varchar(5) DEFAULT NULL,</span><br><span class="line">  `address` varchar(100) DEFAULT NULL,</span><br><span class="line">  `birthday` datetime NOT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 普通索引</span><br><span class="line">CREATE TABLE `users` (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `username` varchar(50) DEFAULT NULL,</span><br><span class="line">  `sex` varchar(5) DEFAULT NULL,</span><br><span class="line">  `address` varchar(100) DEFAULT NULL,</span><br><span class="line">  `birthday` datetime NOT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  INDEX 索引名(`字段名`)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 唯一索引</span><br><span class="line">CREATE TABLE `users` (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `username` varchar(50) DEFAULT NULL,</span><br><span class="line">  `sex` varchar(5) DEFAULT NULL,</span><br><span class="line">  `address` varchar(100) DEFAULT NULL,</span><br><span class="line">  `birthday` datetime NOT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  UNIQUE INDEX 索引名(`字段名`)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 全文索引</span><br><span class="line">CREATE TABLE `users` (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `username` varchar(50) DEFAULT NULL,</span><br><span class="line">  `sex` varchar(5) DEFAULT NULL,</span><br><span class="line">  `address` varchar(100) DEFAULT NULL,</span><br><span class="line">  `birthday` datetime NOT NULL,</span><br><span class="line">  PRIMARY KEY (`id`),</span><br><span class="line">  FULLTEXT INDEX 索引名(`字段名`)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>创建后：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. ALTER TABLE 表名 ADD [FULLTEXT | UNIQUE] INDEX 索引名(字段名);</span><br><span class="line">2. ALTER TABLE 表名 ADD PRIMARY KEY(字段名);</span><br><span class="line"></span><br><span class="line"># 如果是常规索引，是 INDEX | KEY 索引名(字段名)</span><br></pre></td></tr></table></figure>
<p>新建一个只有主键的表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table `user`(</span><br><span class="line">`id` int(11) not null auto_increment,</span><br><span class="line">`username` varchar(40) default null,</span><br><span class="line">`password` varchar(40) default null,</span><br><span class="line">primary key(`id`));</span><br></pre></td></tr></table></figure>
<p>可以使用 <code>show index from 表</code> 来查看表的索引情况：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409210310.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>此时就只有主键。</p>
<p>将 <code>username</code> 设置为唯一索引：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE `user` ADD UNIQUE INDEX uni_username(`username`);</span><br></pre></td></tr></table></figure>
<p>将 <code>password</code> 设置为全文索引：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE `user` ADD FULLTEXT INDEX fl_username(`password`);</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409210652.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>可以使用 <code>EXPLAIN</code> 来查看 sql 语句执行的情况，比如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM student;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409210810.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>从结果中可以知道，查询了 3 行。但该表目前没有一条记录，为什么查询了 3
行？</p>
<h2 id="聚集索引与二级索引">6.2. 聚集索引与二级索引</h2>
<p>来自：<a
target="_blank" rel="noopener" href="https://blog.51cto.com/u_15752673/5966420">MySQL高级【索引分类】_51CTO博客_mysql索引分类</a></p>
<p>在 InnoDB 存储引擎中，根据索引的存储形式，又可以分为以下两种：</p>
<table>
<colgroup>
<col style="width: 75%" />
<col style="width: 12%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr class="header">
<th>分类</th>
<th>含义</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>聚集索引（Cluster Index）</td>
<td>将数据存储与索引放到了一块，索引结构的叶子节点保存了行数据</td>
<td>必须有，且只有一个</td>
</tr>
<tr class="even">
<td>二级索引（Secondary Index）</td>
<td>将数据与索引分开存储，索引结构的叶子节点关联的是对应的主键</td>
<td>可以存在多个</td>
</tr>
</tbody>
</table>
<p>聚集索引选取规则:</p>
<ul>
<li>如果存在主键，主键索引就是聚集索引；</li>
<li>如果不存在主键，将使用第一个唯一（UNIQUE）索引作为聚集索引；</li>
<li>如果表没有主键，或没有合适的唯一索引，则 InnoDB 会自动生成一个 rowid
作为隐藏的聚集索引。</li>
</ul>
<p>聚集索引和二级索引的结构如下图：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/%E8%81%9A%E9%9B%86%E7%B4%A2%E5%BC%95%E5%92%8C%E4%BA%8C%E7%BA%A7%E7%B4%A2%E5%BC%95.webp"
alt="聚集索引和二级索引" />
<figcaption aria-hidden="true">聚集索引和二级索引</figcaption>
</figure>
<ul>
<li>聚集索引的叶子节点下挂的是这一行的数据。</li>
<li>二级索引的叶子节点下挂的是该字段值对应的主键值。</li>
</ul>
<p>假设 SQL
语句为：<code>select * from user where name='arm'</code>，查找流程如下：</p>
<ol type="1">
<li>因为查找的字段时 <code>name</code>
所以只能通过二级索引查找，根据二级索引找到了 <code>arm</code>
在最左下角，得到了主键 10；</li>
<li>因为要查找 <code>*</code>，所以 MySQL 根据主键 10
去聚集索引中找，最终得到 <code>row</code> 也就是一行记录；</li>
</ol>
<p>这种先去二级索引查找得到主键后，又根据主键到聚集索引中查找记录的方式称为<strong>回表查询</strong>。</p>
<p>思考题：以下两条 SQL 语句，其中 <code>id</code>
是主键，那个执行效率高? 为什么?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. select * from user where id = 10;</span><br><span class="line">2. select * from user where name = &#x27;arm&#x27;;</span><br></pre></td></tr></table></figure>
<p>第一条语句可以直接根据主键值在聚集索引中查找，而不需要回表查询，而第二条语句的过程上面说明了，需要回表查询，所以第一条语句效率高。</p>
<h2 id="百万数据测试">6.3. 百万数据测试</h2>
<p>创建一个测试表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `app_user`(</span><br><span class="line">	`id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,</span><br><span class="line">	`name` VARCHAR(50) DEFAULT &#x27;&#x27; COMMENT &#x27;昵称&#x27;,</span><br><span class="line">	`email` VARCHAR(50) DEFAULT NULL COMMENT &quot;邮箱&quot;,</span><br><span class="line">	`phone` VARCHAR(20) DEFAULT NULL COMMENT &quot;手机号&quot;,</span><br><span class="line">	`gender` TINYINT(4) DEFAULT NULL COMMENT &quot;性别 0-男, 1-女&quot;,</span><br><span class="line">	`password` VARCHAR(100) NOT NULL COMMENT &quot;密码&quot;,</span><br><span class="line">	`age` TINYINT(4) NOT NULL COMMENT &quot;年龄&quot;,</span><br><span class="line">	`create_time` DATETIME DEFAULT CURRENT_TIMESTAMP,</span><br><span class="line">	`update_time` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,</span><br><span class="line">	PRIMARY KEY (`id`)</span><br><span class="line">)ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT=&#x27;app用户表&#x27;;</span><br></pre></td></tr></table></figure>
<p>插入数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line">CREATE FUNCTION mock_data()</span><br><span class="line">RETURNS INT</span><br><span class="line"></span><br><span class="line">BEGIN</span><br><span class="line">	DECLARE num INT DEFAULT 1000000;</span><br><span class="line">	DECLARE i INT DEFAULT 0;</span><br><span class="line">	</span><br><span class="line">	WHILE i &lt; num DO</span><br><span class="line">        -- 插入语句</span><br><span class="line">        INSERT INTO `bank`.`app_user`(`name`,`email`,`phone`,`gender`,`password`,`age`)VALUES</span><br><span class="line">        (CONCAT(&#x27;用户&#x27;,i), &#x27;123456@qq.com&#x27;, CONCAT(&#x27;18&#x27;, FLOOR(RAND()*((999999999-100000000)+100000000))),</span><br><span class="line">        FLOOR(RAND()*2), UUID(), FLOOR(RAND()*100));</span><br><span class="line">		SET i = i+1;</span><br><span class="line">	END WHILE;</span><br><span class="line">	RETURN i;</span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<p>我虚拟机带不动，这里引用别人的结果，上面代码执行成功后，执行
<code>select mock_data()</code>：</p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409220946.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>未加索引的情况：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `app_user` WHERE `name`=&#x27;用户9999&#x27;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409221028.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>使用 <code>EXPLAIN</code> 分析：<code>EXPLAIN SELECT * FROM</code>
app_user <code>WHERE</code> name <code>='用户9999'</code></p>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409221106.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>使用索引的情况：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX id_app_user_name ON app_user(`name`); # 增加索引</span><br></pre></td></tr></table></figure>
<p>再次执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `app_user` WHERE `name`=&#x27;用户9999&#x27;</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409221158.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>个人理解：</p>
<ul>
<li>没有索引得一行一行的找过去；</li>
<li>有索引则先看每一行的 <code>name</code>
字段，如果遇到相同的，则返回该行结果，所以只找了一行，也就是最终结果的那一行；</li>
</ul>
<h2 id="索引原则">6.4. 索引原则</h2>
<p>索引虽然好用，但是不可以滥用，这里有几个原则可以记一下：</p>
<ul>
<li>索引不是越多越好。</li>
<li>不要对经常变动的数据加索引。</li>
<li>小数据量的表不需要加索引。</li>
<li>索引一般加在常用来查询的字段上。</li>
</ul>
<h1 id="权限管理和备份">7. 权限管理和备份</h1>
<h2 id="用户管理">7.1. 用户管理</h2>
<blockquote>
<p>可以看一下 [[Day7(MySQL)]]</p>
</blockquote>
<p>用户表：<code>mysql.user</code>，该表有 MySQL
所有用户信息，包括权限。</p>
<p>创建用户：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &#x27;username&#x27;@&#x27;内容&#x27; IDENTIFIED BY 密码;</span><br></pre></td></tr></table></figure>
<p>修改当前用户密码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET PASSWORD=PASSWORD(新密码);</span><br></pre></td></tr></table></figure>
<p>修改指定用户密码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET PASSWORD FOR &#x27;username&#x27;@&#x27;内容&#x27; = PASSWORD(新密码);</span><br></pre></td></tr></table></figure>
<p>重命名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RENAME USER &#x27;username&#x27;@&#x27;内容&#x27; To &#x27;username&#x27;@&#x27;内容&#x27;;</span><br></pre></td></tr></table></figure>
<p>用户授权（<code>*.*</code> 表示所有库，所有表）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#x27;username&#x27;@&#x27;内容&#x27;;</span><br></pre></td></tr></table></figure>
<p>此时该用户拥有了数据库所有权限，只有一项权利没有，那就是
<code>grant</code>，也就是给别人授权。</p>
<p>查询权限：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW GRANTS FOR &#x27;username&#x27;@&#x27;内容&#x27;;</span><br></pre></td></tr></table></figure>
<p>撤销权限：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">REVOKE ALL PRIVILEGES ON *.* TO &#x27;username&#x27;@&#x27;内容&#x27;;</span><br></pre></td></tr></table></figure>
<p>删除用户：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP USER &#x27;username&#x27;@&#x27;内容&#x27;;</span><br></pre></td></tr></table></figure>
<h2 id="mysql-备份">7.2. MySQL 备份</h2>
<p>备份的作用：</p>
<ol type="1">
<li>保证重要的数据不丢失；</li>
<li>数据转移；</li>
</ol>
<p>MySQL 数据库的备份方式：</p>
<ol type="1">
<li><p>直接拷贝物理文件；</p></li>
<li><p>在可视化工具中手动“导出”，如果选择结构和数据，会把创建表、记录那些语句也导出，在新的
mysql 执行该文件就可以“恢复”数据； <img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409223921.png"
alt="image.png" /></p></li>
<li><p>使用命令行“导出”；</p></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导出数据库</span></span><br><span class="line">mysqldump -h主机名 -u用户名 -p密码 数据库 &gt; 路径</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导出表</span></span><br><span class="line">mysqldump -h主机名 -u用户名 -p密码 数据库 表1[ 表2 ...] &gt; 路径</span><br></pre></td></tr></table></figure>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230409224331.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<p>导入使用的命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 登录情况下</span><br><span class="line">1. 导入表，切换到指定的数据库，source 文件</span><br><span class="line">2. 导入数据库，直接 source 文件</span><br><span class="line"></span><br><span class="line"># 不登录情况下</span><br><span class="line">mysql -u用户名 -p用户名 [库名] &lt; 备份文件</span><br></pre></td></tr></table></figure>
<blockquote>
<p>也可以使用写文件和读文件配合来导入导出 [[3. 数据库内置系统表学习#2.
数据库读写文件]]</p>
</blockquote>
<h1 id="规范数据库设计">8. 规范数据库设计</h1>
<h2 id="概述-2">8.1. 概述</h2>
<p>糟糕的数据库设计：</p>
<ol type="1">
<li>数据冗余、浪费空间；</li>
<li>数据库插入和删除麻烦；</li>
<li>程序性能差；</li>
</ol>
<blockquote>
<p>数据需要一定的冗余，但不需要大量的冗余</p>
</blockquote>
<p>良好的数据库设计：</p>
<ol type="1">
<li>节省内存空间；</li>
<li>保证数据库的完整性；</li>
<li>方便后续开发；</li>
</ol>
<p>设计数据库一般分为两个步骤：</p>
<ol type="1">
<li>分析需求：分析业务和需要处理的数据库的需求；</li>
<li>概要设计：设计关系图、E-R（Entity-Relationship）图；</li>
</ol>
<p>以个人博客为例：</p>
<ol type="1">
<li>收集信息、分析需求：
<ol type="1">
<li>用户表：用户的个人信息，如用户名、密码等；</li>
<li>分类表：文章的分类；</li>
<li>文章表：存放文章；</li>
<li>评论表；</li>
<li>友链表；</li>
<li>......</li>
</ol></li>
<li>标识实体（把需求落地到每个字段）
<ol type="1">
<li>用户表：
<ol type="1">
<li>用户 id：主键、非空、自增；</li>
<li>用户名：非空；</li>
<li>用户密码：非空；</li>
<li>...</li>
</ol></li>
<li>分类表：
<ol type="1">
<li>分类 id：分类的唯一标识、主键（所有表都有一个 id
作为唯一标识，用来唯一标记该表中的某条记录）；</li>
<li>分类名：非空；</li>
<li>创建用户 id：非空；</li>
<li>...</li>
</ol></li>
<li>文章表:
<ol type="1">
<li>文章 id：文章的唯一标识、主键；</li>
<li>标题：非空；</li>
<li>作者信息：非空，对应用户 id；</li>
<li>文章分类：非空，对应分类 id；</li>
<li>内容：非空；</li>
<li>创建时间：非空；</li>
<li>更新时间：非空；</li>
<li>...</li>
</ol></li>
<li>评论表：
<ol type="1">
<li>评论 id：评论的唯一标识、主键；</li>
<li>评论人：对应用户 id；</li>
<li>文章：对应文章 id；</li>
<li>评论内容：非空；</li>
<li>评论时间：非空；</li>
<li>...</li>
</ol></li>
<li>友链表：
<ol type="1">
<li>友链 id：友链的唯一标识、主键；</li>
<li>友链：非空；</li>
<li>...</li>
</ol></li>
<li>...</li>
</ol></li>
<li>标识实体之间的关系
<ol type="1">
<li>写博客：用到用户表、文章表；</li>
<li>创建分类：用到用户表、分类表；</li>
<li>评论：用到用户表、评论表；</li>
<li>友链：只用到友链表；</li>
<li>...</li>
</ol></li>
</ol>
<h2 id="三大范式关系型数据库">8.2. 三大范式（关系型数据库）</h2>
<p>参考：<a
target="_blank" rel="noopener" href="https://www.helloworld.net/p/7753670315">关系型数据库设计三大范式
- HelloWorld开发者社区</a></p>
<h3 id="范式定义">8.2.1. 范式定义</h3>
<p>定义：设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，这些不同的规范要求被称为不同的范式，各种范式呈递次规范，越高的范式数据库冗余越小。</p>
<p>采用范式可以降低数据的冗余性，缺点是获取数据时比较麻烦，可能需要 join
才能得到最后的数据。</p>
<p>目前有：</p>
<ol type="1">
<li>第一范式 <code>1NF</code>；</li>
<li>第二范式 <code>2NF</code>；</li>
<li>第三范式 <code>3NF</code>；</li>
<li>巴斯-科德范式 <code>BCNF</code>；</li>
<li>第四范式 <code>4NF</code>；</li>
<li>第五范式 <code>5NF</code>；</li>
</ol>
<h3 id="函数依赖">8.2.2. 函数依赖</h3>
<p>定义：A 属性集决定 B 属性集时，称 B 属性集依赖于 A 属性集。</p>
<p>比如下面这张表格：</p>
<table>
<thead>
<tr class="header">
<th>学号</th>
<th>姓名</th>
<th>系名</th>
<th>系主任</th>
<th>科名</th>
<th>分数</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>001</td>
<td>张三</td>
<td>计算机系</td>
<td>李雷</td>
<td>高等数学</td>
<td>87</td>
</tr>
<tr class="even">
<td>001</td>
<td>张三</td>
<td>计算机系</td>
<td>李雷</td>
<td>大学英语</td>
<td>88</td>
</tr>
<tr class="odd">
<td>001</td>
<td>张三</td>
<td>计算机系</td>
<td>李雷</td>
<td>数据库设计</td>
<td>89</td>
</tr>
<tr class="even">
<td>002</td>
<td>李四</td>
<td>计算机系</td>
<td>李雷</td>
<td>高等数学</td>
<td>86</td>
</tr>
<tr class="odd">
<td>002</td>
<td>李四</td>
<td>计算机系</td>
<td>李雷</td>
<td>java 程序设计</td>
<td>90</td>
</tr>
<tr class="even">
<td>002</td>
<td>李四</td>
<td>计算机系</td>
<td>李雷</td>
<td>大学英语</td>
<td>98</td>
</tr>
<tr class="odd">
<td>003</td>
<td>王五</td>
<td>财务系</td>
<td>韩梅梅</td>
<td>高等数学</td>
<td>96</td>
</tr>
<tr class="even">
<td>003</td>
<td>王五</td>
<td>财务系</td>
<td>韩梅梅</td>
<td>财务基础</td>
<td>95</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>完全函数依赖</strong>：通过（A，B） 能够得出 C，但是单独通过
A 或者单独通过 B 得不到 C，则 C 完全依赖
A、B。比如上面可以通过（学号，科名）得到分数，但通过学号或者科名无法单独得到分数，则分数完全依赖与
（学号，科名）；</li>
<li><strong>部分函数依赖</strong>：通过（A，B）能够得出 C，但是单独通过
A 或者单独通过 B 也能够得到 C，那么称 C
部分依赖于（A，B）。比如上面可以通过（学号，科名）推出姓名，但单独通过学号也可以推出姓名，所以姓名部分依赖于（学号，科名）；</li>
<li><strong>传递函数依赖</strong>：通过 A 可以得到 B，通过 B 可以得到
C，但是通过 C 得不到 A，那么 C 传递依赖于
A。比如通过学号可以推出系名，通过系名可以推出系主任，但通过系主任得不到学号，所以系主任传递依赖于学号；</li>
</ul>
<h3 id="三大范式区别">8.2.3. 三大范式区别</h3>
<p><strong>第一范式核心原则：属性不可切割。</strong></p>
<p>举例说明：</p>
<table>
<thead>
<tr class="header">
<th>学号</th>
<th>姓名</th>
<th>系名</th>
<th>系主任</th>
<th>科名</th>
<th>分数</th>
<th>学籍信息</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>001</td>
<td>张三</td>
<td>计算机系</td>
<td>李雷</td>
<td>高等数学</td>
<td>87</td>
<td>本科，大一</td>
</tr>
<tr class="even">
<td>002</td>
<td>李四</td>
<td>计算机系</td>
<td>李雷</td>
<td>java 程序设计</td>
<td>90</td>
<td>本科，大二</td>
</tr>
</tbody>
</table>
<p>上面这张表格明显不符合第一范式原则，因为“学籍信息”属性不是原子项数据，还可以分割为学历和年级，最终得到如下满足第一范式核心原则的表：</p>
<table>
<thead>
<tr class="header">
<th>学号</th>
<th>姓名</th>
<th>系名</th>
<th>系主任</th>
<th>科名</th>
<th>分数</th>
<th>学历</th>
<th>年级</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>001</td>
<td>张三</td>
<td>计算机系</td>
<td>李雷</td>
<td>高等数学</td>
<td>87</td>
<td>本科</td>
<td>大一</td>
</tr>
<tr class="even">
<td>002</td>
<td>李四</td>
<td>计算机系</td>
<td>李雷</td>
<td>java 程序设计</td>
<td>90</td>
<td>本科</td>
<td>大二</td>
</tr>
</tbody>
</table>
<p>实际上，1NF 是所有关系型数据库的最基本要求
,你在关系型数据库管理系统（RDBMS），例如 SQL Server，Oracle，MySQL
中创建数据表的时候，如果数据表的设计不符合这个最基本的要求，那么操作一定是不能成功的。也就是说，只要在
RDBMS 中已经存在的数据表，一定是符合1NF 的。</p>
<p><strong>第二范式核心原则：在满足第一范式核心原则的基础上，不能存在部分函数依赖。</strong></p>
<table>
<thead>
<tr class="header">
<th>学号</th>
<th>姓名</th>
<th>系名</th>
<th>系主任</th>
<th>科名</th>
<th>分数</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>001</td>
<td>张三</td>
<td>计算机系</td>
<td>李雷</td>
<td>高等数学</td>
<td>87</td>
</tr>
<tr class="even">
<td>001</td>
<td>张三</td>
<td>计算机系</td>
<td>李雷</td>
<td>大学英语</td>
<td>88</td>
</tr>
<tr class="odd">
<td>001</td>
<td>张三</td>
<td>计算机系</td>
<td>李雷</td>
<td>数据库设计</td>
<td>89</td>
</tr>
<tr class="even">
<td>002</td>
<td>李四</td>
<td>计算机系</td>
<td>李雷</td>
<td>高等数学</td>
<td>86</td>
</tr>
<tr class="odd">
<td>002</td>
<td>李四</td>
<td>计算机系</td>
<td>李雷</td>
<td>java 程序设计</td>
<td>90</td>
</tr>
<tr class="even">
<td>002</td>
<td>李四</td>
<td>计算机系</td>
<td>李雷</td>
<td>大学英语</td>
<td>98</td>
</tr>
<tr class="odd">
<td>003</td>
<td>王五</td>
<td>财务系</td>
<td>韩梅梅</td>
<td>高等数学</td>
<td>96</td>
</tr>
<tr class="even">
<td>003</td>
<td>王五</td>
<td>财务系</td>
<td>韩梅梅</td>
<td>财务基础</td>
<td>95</td>
</tr>
</tbody>
</table>
<p>上表就不满足第二范式核心原则，比如分数完全依赖于（学号，科名），但姓名、系名并不完全依赖于（学号，科名），只靠学号就能得到，所以存在部分依赖，将其修改为如下：</p>
<table>
<thead>
<tr class="header">
<th>学号</th>
<th>姓名</th>
<th>系名</th>
<th>系主任</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>001</td>
<td>张三</td>
<td>计算机系</td>
<td>李雷</td>
</tr>
<tr class="even">
<td>002</td>
<td>李四</td>
<td>计算机系</td>
<td>李雷</td>
</tr>
<tr class="odd">
<td>003</td>
<td>王五</td>
<td>财务系</td>
<td>韩梅梅</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th>学号</th>
<th>科名</th>
<th>分数</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>001</td>
<td>高等数学</td>
<td>87</td>
</tr>
<tr class="even">
<td>001</td>
<td>大学英语</td>
<td>88</td>
</tr>
<tr class="odd">
<td>001</td>
<td>数据库设计</td>
<td>89</td>
</tr>
<tr class="even">
<td>002</td>
<td>高等数学</td>
<td>86</td>
</tr>
<tr class="odd">
<td>002</td>
<td>java 程序设计</td>
<td>90</td>
</tr>
<tr class="even">
<td>002</td>
<td>大学英语</td>
<td>98</td>
</tr>
<tr class="odd">
<td>003</td>
<td>高等数学</td>
<td>96</td>
</tr>
<tr class="even">
<td>003</td>
<td>财务基础</td>
<td>95</td>
</tr>
</tbody>
</table>
<p><strong>第三范式核心原则：满足第二范式核心原则基础上，不能存在传递函数依赖。</strong></p>
<table>
<thead>
<tr class="header">
<th>学号</th>
<th>姓名</th>
<th>系名</th>
<th>系主任</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>001</td>
<td>张三</td>
<td>计算机系</td>
<td>李雷</td>
</tr>
<tr class="even">
<td>002</td>
<td>李四</td>
<td>计算机系</td>
<td>李雷</td>
</tr>
<tr class="odd">
<td>003</td>
<td>王五</td>
<td>财务系</td>
<td>韩梅梅</td>
</tr>
</tbody>
</table>
<p>上表中：学号可以得到系名，系名可以得到系主任，但系主任得不到学号，所以应该继续拆分，得到如下：</p>
<table>
<thead>
<tr class="header">
<th>学号</th>
<th>姓名</th>
<th>系名</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>001</td>
<td>张三</td>
<td>计算机系</td>
</tr>
<tr class="even">
<td>002</td>
<td>李四</td>
<td>计算机系</td>
</tr>
<tr class="odd">
<td>003</td>
<td>王五</td>
<td>财务系</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th>系名</th>
<th>系主任</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>计算机系</td>
<td>李雷</td>
</tr>
<tr class="even">
<td>财务系</td>
<td>韩梅梅</td>
</tr>
</tbody>
</table>
<h3 id="规范性和性能取舍">8.2.4. 规范性和性能取舍</h3>
<p>没有冗余的数据库未必是最好的数据库，有时为了提高运行效率，就必须降低范式标准，适当保留冗余数据。具体做法是：在概念数据模型设计时遵守第三范式，降低范式标准的工作放到物理数据模型设计时考虑。降低范式就是增加字段，减少了查询时的关联，提高查询效率，因为在数据库的操作中查询的比例要远远大于
DML
的比例。但是反范式化一定要适度，并且在原本已满足三范式的基础上再做调整的。</p>
<p>举个例子，比如我想通过学号查询学生的成绩、系名和系主任，使用最开始的表只要查
1
张表，而使用满足三大范式的表需要通过学号查到姓名、系名，通过系名查找系主任，通过学号查找成绩，这里面需要查
3 张表。</p>
<p>数据库设计应该也是分为三个境界的：</p>
<ol type="1">
<li>第一个境界，刚入门数据库设计，范式的重要性还未深刻理解。这时候出现的反范式设计，一般会出问题。</li>
<li>第二个境界，随着遇到问题解决问题，渐渐了解到范式的真正好处，从而能快速设计出低冗余、高效率的数据库。</li>
<li>第三个境界，再经过 N
年的锻炼，是一定会发觉范式的局限性的。此时再去打破范式，设计更合理的反范式部分。</li>
</ol>
<h1 id="jdbc">9. JDBC</h1>
<figure>
<img
src="https://raw.githubusercontent.com/hdfzzf/Figurebed/main/imgs/20230410095736.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<ol type="1">
<li>创建一个普通项目 (数据库)</li>
<li>导入数据库驱动</li>
<li>编写测试代码</li>
</ol>
<p>简单的 JDBC 程序：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.lesson01;  </span><br><span class="line"><span class="comment">//我的第一个JDBC程序  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;  </span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;  </span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;  </span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcFirstDemo</span> </span>&#123;  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;  </span><br><span class="line"><span class="comment">//1. 加载驱动  </span></span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);<span class="comment">//固定写法  </span></span><br><span class="line"><span class="comment">//2. 用户信息和url  </span></span><br><span class="line"><span class="comment">//useUnicode=true&amp;characterEncoding=utf8&amp;&amp;useSSL=true  </span></span><br><span class="line">String url =<span class="string">&quot;jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;&amp;useSSL=false&quot;</span>;  </span><br><span class="line">String name = <span class="string">&quot;root&quot;</span>;  </span><br><span class="line">String password = <span class="string">&quot;123456&quot;</span>;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//3. 连接成功，返回数据库对象  connection代表数据库  </span></span><br><span class="line">Connection connection= DriverManager.getConnection(url,name,password);  </span><br><span class="line"><span class="comment">//4. 执行SQL的对象 statement 执行SQL的对象  </span></span><br><span class="line">Statement statement = connection.createStatement();  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//5. 执行SQL的对象 去执行SQL   可能存在结果，查看返回结果  </span></span><br><span class="line">String sql=<span class="string">&quot;SELECT * FROM users&quot;</span>;  </span><br><span class="line">ResultSet resultSet = statement.executeQuery(sql);<span class="comment">//返回的结果集,结果集中封装了我们全部查询的结果  </span></span><br><span class="line"><span class="keyword">while</span>(resultSet.next())&#123;  </span><br><span class="line">System.out.println(<span class="string">&quot;id+&quot;</span>+resultSet.getObject(<span class="string">&quot;id&quot;</span>));  </span><br><span class="line">System.out.println(<span class="string">&quot;name+&quot;</span>+resultSet.getObject(<span class="string">&quot;NAME&quot;</span>));  </span><br><span class="line">System.out.println(<span class="string">&quot;password+&quot;</span>+resultSet.getObject(<span class="string">&quot;PASSWORD&quot;</span>));  </span><br><span class="line">System.out.println(<span class="string">&quot;email+&quot;</span>+resultSet.getObject(<span class="string">&quot;email&quot;</span>));  </span><br><span class="line">System.out.println(<span class="string">&quot;birthday+&quot;</span>+resultSet.getObject(<span class="string">&quot;birthday&quot;</span>));  </span><br><span class="line">        &#125;  </span><br><span class="line"><span class="comment">//6. 释放连接  </span></span><br><span class="line">resultSet.close();  </span><br><span class="line">statement.close();  </span><br><span class="line">connection.close();  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>步骤总结：</p>
<ol type="1">
<li>加载驱动</li>
<li>连接数据库 DriverManager</li>
<li>获取执行 SQL 的对象 Statement</li>
<li>获得返回的结果集</li>
<li>释放连接</li>
</ol>
<p>这里放出 PHP 写的代码 [[8. SQL注入漏洞手工测试]]：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?</span> php</span><br><span class="line"><span class="variable">$username</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line"><span class="variable">$password</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line"><span class="variable">$servername</span> = <span class="string">&quot;localhost&quot;</span>;</span><br><span class="line"><span class="variable">$db_username</span> = <span class="string">&#x27;www_data&#x27;</span>;</span><br><span class="line"><span class="variable">$db_passwd</span> = <span class="string">&#x27;www_data&#x27;</span>;</span><br><span class="line"><span class="variable">$db_name</span> = <span class="string">&#x27;www_data&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接MySQL</span></span><br><span class="line"><span class="variable">$conn</span> = <span class="keyword">new</span> mysqli(<span class="variable">$servername</span>, <span class="variable">$db_username</span>, <span class="variable">$db_passwd</span>, <span class="variable">$db_name</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$conn</span>-&gt;connect_error)&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;MySQL connection failure.&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># SQL查询语句</span></span><br><span class="line"><span class="variable">$sql</span> = <span class="string">&quot;SELECT * FROM users WHERE username=&#x27;<span class="subst">$username</span>&#x27; AND password=&#x27;<span class="subst">$password</span>&#x27; limit 0, 1&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行查询</span></span><br><span class="line"><span class="variable">$res</span> = <span class="variable">$conn</span>-&gt;query(<span class="variable">$sql</span>);</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$res</span>)&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;sql error:&lt;br&gt;&#x27;</span>.<span class="variable">$conn</span>-&gt;error);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获得返回的结果集</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="variable">$res</span>-&gt;fetch_array();</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$arr</span>)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;font size=&#x27;5&#x27;&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Your ID:&#x27;</span>. <span class="variable">$arr</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Your Login name:&#x27;</span>. <span class="variable">$arr</span>[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Your Password:&#x27;</span> .<span class="variable">$arr</span>[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Login failure.&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 释放连接</span></span><br><span class="line"><span class="variable">$res</span>-&gt;free();</span><br><span class="line"><span class="variable">$conn</span>-&gt;close();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>后面都是使用 Java 代码实现数据库的各种操作，因为我不会
Java，所以暂时搁置。</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>加载评论需要在浏览器启用 JavaScript 脚本支持。</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/categories/">分类</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.</span> <span class="toc-text">1. 初始数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1.1. 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.</span> <span class="toc-text">1.2. 分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">1.3.</span> <span class="toc-text">1.3. 安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.</span> <span class="toc-text">1.4. 连接数据库与简单使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-number">2.</span> <span class="toc-text">2. 数据库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%86%E8%A7%A3"><span class="toc-number">2.1.</span> <span class="toc-text">2.1. 操作数据库（了解）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%AD%97%E6%AE%B5%E7%9A%84%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.</span> <span class="toc-text">2.2. 数据类型（字段的常用类型）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%80%BC"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.2.1. 数值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.2.2. 字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%92%8C%E6%97%A5%E6%9C%9F"><span class="toc-number">2.2.3.</span> <span class="toc-text">2.2.3. 时间和日期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">2.2.4.</span> <span class="toc-text">2.2.4. Null</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E5%B1%9E%E6%80%A7"><span class="toc-number">2.3.</span> <span class="toc-text">2.3. 字段属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E5%AD%97%E6%AE%B5%E9%9D%9E%E5%BF%85%E9%A1%BB%E4%BA%BA%E4%B8%BA%E8%A7%84%E5%AE%9A"><span class="toc-number">2.4.</span> <span class="toc-text">2.4. 特殊字段（非必须，人为规定）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-number">2.5.</span> <span class="toc-text">2.5. 创建表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%95%E6%93%8E"><span class="toc-number">2.6.</span> <span class="toc-text">2.6. 表的类型（数据库引擎）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%92%8C%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-number">2.7.</span> <span class="toc-text">2.7. 修改和删除表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9"><span class="toc-number">2.7.1.</span> <span class="toc-text">2.7.1. 修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4"><span class="toc-number">2.7.2.</span> <span class="toc-text">2.7.2. 删除</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">3. 数据管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%96%E9%94%AE"><span class="toc-number">3.1.</span> <span class="toc-text">3.1. 外键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dml-%E8%AF%AD%E8%A8%80"><span class="toc-number">3.2.</span> <span class="toc-text">3.2. DML 语言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1. 添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-1"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2. 修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4-1"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.2.3. 删除</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#delete-%E5%88%A0%E9%99%A4%E9%97%AE%E9%A2%98"><span class="toc-number">3.2.3.1.</span> <span class="toc-text">3.2.3.1. DELETE 删除问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dql-%E8%AF%AD%E8%A8%80"><span class="toc-number">3.3.</span> <span class="toc-text">3.3. DQL 语言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.3.1. 环境配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%AD%97%E6%AE%B5"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.3.2. 查询字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.3.3.</span> <span class="toc-text">3.3.3. 查询表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#where-%E6%9D%A1%E4%BB%B6%E5%AD%90%E5%8F%A5"><span class="toc-number">3.3.4.</span> <span class="toc-text">3.3.4. WHERE 条件子句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%94%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.4.</span> <span class="toc-text">3.4. 联表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E5%86%85%E5%AE%B9"><span class="toc-number">3.4.1.</span> <span class="toc-text">3.4.1. 主要内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%86%85%E5%AE%B9"><span class="toc-number">3.4.2.</span> <span class="toc-text">3.4.2. 其他内容</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#where-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">3.4.2.1.</span> <span class="toc-text">3.4.2.1. Where 的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.4.2.2.</span> <span class="toc-text">3.4.2.2. 注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%9D%E8%80%83%E9%A2%98"><span class="toc-number">3.4.2.3.</span> <span class="toc-text">3.4.2.3. 思考题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">3.4.3.</span> <span class="toc-text">3.4.3. 自连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E5%92%8C%E6%8E%92%E5%BA%8F"><span class="toc-number">3.5.</span> <span class="toc-text">3.5. 分页和排序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">3.5.1.</span> <span class="toc-text">3.5.1. 排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5"><span class="toc-number">3.5.2.</span> <span class="toc-text">3.5.2. 分页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%9D%E8%80%83%E9%A2%98-1"><span class="toc-number">3.5.3.</span> <span class="toc-text">3.5.3. 思考题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%B5%8C%E5%A5%97%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.6.</span> <span class="toc-text">3.6. 子查询和嵌套查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-number">3.6.1.</span> <span class="toc-text">3.6.1. 注意</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%92%8C%E8%BF%87%E6%BB%A4"><span class="toc-number">3.7.</span> <span class="toc-text">3.7. 分组和过滤</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">4.</span> <span class="toc-text">4. 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#count-%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98"><span class="toc-number">4.1.</span> <span class="toc-text">4.1. Count 相关问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BA%A7%E5%88%AB%E7%9A%84-md5-%E5%8A%A0%E5%AF%86"><span class="toc-number">4.2.</span> <span class="toc-text">4.2. 数据库级别的 MD5
加密</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">5.</span> <span class="toc-text">5. 事务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="toc-number">5.1.</span> <span class="toc-text">5.1. 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E4%BA%8B%E5%8A%A1"><span class="toc-number">5.2.</span> <span class="toc-text">5.2. 执行事务</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">6.</span> <span class="toc-text">6. 索引</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">6.1.</span> <span class="toc-text">6.1. 索引的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%9A%E9%9B%86%E7%B4%A2%E5%BC%95%E4%B8%8E%E4%BA%8C%E7%BA%A7%E7%B4%A2%E5%BC%95"><span class="toc-number">6.2.</span> <span class="toc-text">6.2. 聚集索引与二级索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BE%E4%B8%87%E6%95%B0%E6%8D%AE%E6%B5%8B%E8%AF%95"><span class="toc-number">6.3.</span> <span class="toc-text">6.3. 百万数据测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E5%8E%9F%E5%88%99"><span class="toc-number">6.4.</span> <span class="toc-text">6.4. 索引原则</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E5%92%8C%E5%A4%87%E4%BB%BD"><span class="toc-number">7.</span> <span class="toc-text">7. 权限管理和备份</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">7.1.</span> <span class="toc-text">7.1. 用户管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql-%E5%A4%87%E4%BB%BD"><span class="toc-number">7.2.</span> <span class="toc-text">7.2. MySQL 备份</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%84%E8%8C%83%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">8.</span> <span class="toc-text">8. 规范数据库设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-2"><span class="toc-number">8.1.</span> <span class="toc-text">8.1. 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">8.2.</span> <span class="toc-text">8.2. 三大范式（关系型数据库）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8C%83%E5%BC%8F%E5%AE%9A%E4%B9%89"><span class="toc-number">8.2.1.</span> <span class="toc-text">8.2.1. 范式定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BE%9D%E8%B5%96"><span class="toc-number">8.2.2.</span> <span class="toc-text">8.2.2. 函数依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F%E5%8C%BA%E5%88%AB"><span class="toc-number">8.2.3.</span> <span class="toc-text">8.2.3. 三大范式区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%84%E8%8C%83%E6%80%A7%E5%92%8C%E6%80%A7%E8%83%BD%E5%8F%96%E8%88%8D"><span class="toc-number">8.2.4.</span> <span class="toc-text">8.2.4. 规范性和性能取舍</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#jdbc"><span class="toc-number">9.</span> <span class="toc-text">9. JDBC</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://hdfzzf.github.io/2023/04/10/MySQL%E5%85%A5%E9%97%A8/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://hdfzzf.github.io/2023/04/10/MySQL%E5%85%A5%E9%97%A8/&text=MySQL入门"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://hdfzzf.github.io/2023/04/10/MySQL%E5%85%A5%E9%97%A8/&title=MySQL入门"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://hdfzzf.github.io/2023/04/10/MySQL%E5%85%A5%E9%97%A8/&is_video=false&description=MySQL入门"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=MySQL入门&body=Check out this article: https://hdfzzf.github.io/2023/04/10/MySQL%E5%85%A5%E9%97%A8/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://hdfzzf.github.io/2023/04/10/MySQL%E5%85%A5%E9%97%A8/&title=MySQL入门"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://hdfzzf.github.io/2023/04/10/MySQL%E5%85%A5%E9%97%A8/&title=MySQL入门"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://hdfzzf.github.io/2023/04/10/MySQL%E5%85%A5%E9%97%A8/&title=MySQL入门"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://hdfzzf.github.io/2023/04/10/MySQL%E5%85%A5%E9%97%A8/&title=MySQL入门"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://hdfzzf.github.io/2023/04/10/MySQL%E5%85%A5%E9%97%A8/&name=MySQL入门&description=&lt;p&gt;环境：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MySQL 5.7.32；&lt;/li&gt;
&lt;li&gt;Ubuntu 2204；&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;教程：&lt;a
href=&#34;https://www.bilibili.com/video/BV1NJ411J79W?p=1&amp;amp;vd_source=c3b0b6208defe5707a75f328be65ce16&#34;&gt;1、什么是数据库，为什么要学习数据库_哔哩哔哩_bilibili&lt;/a&gt;&lt;/p&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://hdfzzf.github.io/2023/04/10/MySQL%E5%85%A5%E9%97%A8/&t=MySQL入门"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2021-2023
    hdfzzf
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">首页</a></li><!--
     --><!--
       --><li><a href="/archives/">归档</a></li><!--
     --><!--
       --><li><a href="/tags/">标签</a></li><!--
     --><!--
       --><li><a href="/categories/">分类</a></li><!--
     --><!--
       --><li><a href="/search/">搜索</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'cactus-1';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>

<!-- utterances Comments -->

</body>
</html>
